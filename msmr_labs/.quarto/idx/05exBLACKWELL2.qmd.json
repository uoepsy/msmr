{"title":"Week 5 Exercises: Assumptions, Diagnostics, Writing up","markdown":{"yaml":{"title":"Week 5 Exercises: Assumptions, Diagnostics, Writing up","params":{"SHOW_SOLS":true,"TOGGLE":true},"editor_options":{"chunk_output_type":"console"}},"headingText":"Video game agression and the dark triad","containsRefs":false,"markdown":"\n\n```{r}\n#| label: setup\n#| include: false\nsource('assets/setup.R')\nlibrary(xaringanExtra)\nlibrary(tidyverse)\nlibrary(patchwork)\nlibrary(ggdist)\nxaringanExtra::use_panelset()\nqcounter <- function(){\n  if(!exists(\"qcounter_i\")){\n    qcounter_i <<- 1\n  }else{\n    qcounter_i <<- qcounter_i + 1\n  }\n  qcounter_i\n}\nlibrary(lme4)\n```\n\n\n:::frame\n__Dataset: NGV.csv__  \n\nThese data are from an experiment designed to investigate how the realism of video games is associated with more/less unnecessarily aggressive gameplay, and whether this differs depending upon a) the playing mode (playing on a screen vs VR headset), and b) individual differences in the 'dark triad' personality traits.  \n\nThe experiment involved playing 10 levels of a game in which the objective was to escape a maze. Various obstacles and other characters were present throughout the maze, and players could interact with these by side-stepping or jumping over them, or by pushing or shooting at them. All of these actions took the same amount of effort to complete (pressing a button), and each one achieved the same end (moving beyond the obstacle and being able to continue through the maze).  \n\nEach participant completed all 10 levels twice, once in which all characters were presented as cartoons, and once in which all characters were presented as realistic humans and animals. The layout of the level was identical in both, the only difference being the depiction of objects and characters. For each participant, these 20 levels ($2 \\times 10$ mazes) were presented in a random order. Half of the participants played via a screen, and the other half played via a VR headset. For each level played, we have a record of \"needless game violence\" (NGV) which was calculated via the number of aggressive (pushing/shooting) actions taken (+0.5 for every action that missed an object, +1 for every action aimed at an inanimate object, and +2 for every action aimed at an animate character).  \nPrior to the experiment, each participant completed the Short Dark Triad 3 (SD-3), which measures the three traits of machiavellianism, narcissism, and psychopathy.  \n\n```{r}\n#| echo: false\nngv <- read_csv(\"../../data/ngv.csv\")\ntibble(\n  variable=names(ngv),\n  description=c(\n    \"Participant number\",\n    \"Maze level (1 to 20)\",\n    \"Whether the objects and characters in the level were presented as 'cartoon' or as 'realistic'\",\n    \"Whether the participant played via a screen or with a VR headset\",\n    \"Psycopathy Trait from SD-3 (score 1-5)\",\n    \"Narcissism Trait from SD-3 (score 1-5)\",\n    \"Machiavellianism Trait from SD-3 (score 1-5)\",\n    \"Needless Game Violence metric\"\n  )\n) |> gt::gt()\n```\n\n\n\n:::\n\n`r qbegin(qcounter())`\nConduct an analysis to address the research aims!  \n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hints\n\n- There's a lot to unpack in the research aim: _\"how the realism of video games is associated with more/less unnecessarily aggressive gameplay, and whether this differs depending upon a) the playing mode (playing on a screen vs VR headset), and b) individual differences in the 'dark triad' personality traits.\"_    \n\n\n:::\n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\nm1 = lmer(NGV ~ character * (mode + P + M + N) + \n            (1 + character | PID) + \n            (1 + mode | level), data = ngv)\nsummary(m1)\n```\n\n```{r}\nlibrary(parameters)\nmodel_parameters(m1, ci_method=\"kr\") |> print_html()\n```\n\n\n\n`r solend()`\n\n`r qbegin(qcounter())`\nCheck the assumptions of your model\n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hints\n\nWe have a multilevel model, so we have assumptions at multiple levels! See [5A#mlm-assumptions-diagnostics](05a_assump.html#mlm-assumptions-diagnostics){target=\"_blank\"}.  \n\nBe careful - QQplots with few datapoints can make things look weirder than they are - try a histogram too \n\n\n:::\n\n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n```{r}\nplot(m1)\nplot(m1,\n     form = sqrt(abs(resid(.))) ~ fitted(.),\n     type = c(\"p\",\"smooth\"))\n```\n\n```{r echo=c(2,3,4,5)}\npar(mfrow=c(2,2))\nqqnorm(ranef(m1)$PID[,1],main=\"1|PID\");qqline(ranef(m1)$PID[,1])\nqqnorm(ranef(m1)$PID[,2],main=\"character|PID\");qqline(ranef(m1)$PID[,2])\nqqnorm(ranef(m1)$level[,1],main=\"1|level\");qqline(ranef(m1)$level[,1])\nqqnorm(ranef(m1)$level[,2],main=\"mode|level\");qqline(ranef(m1)$level[,2])\npar(mfrow=c(1,1))\n```\n```{r echo=c(2,3,4,5)}\npar(mfrow=c(2,2))\nhist(ranef(m1)$PID[,1],main=\"1|PID\")\nhist(ranef(m1)$PID[,2],main=\"character|PID\")\nhist(ranef(m1)$level[,1],main=\"1|level\")\nhist(ranef(m1)$level[,2],main=\"mode|level\")\npar(mfrow=c(1,1))\n```\n\n```{r}\nlibrary(performance)\ncheck_predictions(m1)\n```\n\n`r solend()`\n\n`r qbegin(qcounter())`\nCheck the extent to which your results may be sensitive to certain influential observations, or participants, or levels!  \n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hints\n\nSee [5A #influence](05a_assump.html#influence){target=\"_blank\"} for two packages that can assess influence. \n\n:::\n\n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\nlibrary(HLMdiag)\ninf1 <- hlm_influence(m1,level=1)\ndotplot_diag(inf1$cooksd, cutoff=\"internal\")\ninf2 <- hlm_influence(m1,level=\"PID\")\ndotplot_diag(inf2$cooksd, index=inf2$PID, cutoff=\"internal\")\ninf3 <- hlm_influence(m1,level=\"level\")\ndotplot_diag(inf3$cooksd, cutoff=\"internal\")\n```\n\n\n`r solend()`\n\n\n`r qbegin(qcounter())`\nWrite a short description of the sample data.  \n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n\n`r solend()`\n\n\n`r qbegin(qcounter())`\nWrite a short explanation of your methods\n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hints\n\n- explain any transformations to the data prior to modelling\n- explain the model(s) fitted and how they address the research aims\n- describe any actions taken as a result of non-convergence\n- what estimation method was used (ML, REML)? What software (including version and packages)? What optimiser? \n- if degrees of freedom were used, what kind? If not, how are inferences conducted?  \n- what assumptions of the model were checked, and what was the outcome?\n\n\n:::\n\n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n`r solend()`\n\n\n`r qbegin(qcounter())`\nWrite a short summary of your results, along with suitable visualisations and tables\n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hints\n\n- if model comparisons were conducted, provide results and what they mean  \n- present and interpret fixed effects estimates that are relevant to the research aim.  \n- discuss random effect estimates - does the relevant effect vary a lot between clusters?  \n- was the sensitivty of the results to influential observations/clusters assessed? if so, what did you find?\n\n\n:::\n\n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\nlibrary(effects)\n\nplotp <- effect(\"character*P\",mod=m1,xlevels=list(P=c(1,2,3,4,5))) |> as.data.frame()\n\nggplot(data = ngv, aes(x=character,col=factor(P)))+\n  geom_jitter(aes(y=NGV),alpha=.2,height=0) +\n  geom_pointrange(data=plotp, aes(y=fit,ymin=lower,ymax=upper),\n                  position=position_dodge(width = .2))+\n  scale_color_viridis_d(\"Psychopathy\",option=\"C\",direction = -1)+\n  theme_dark()\n```\n\n```{r}\nplotm <- effect(\"character*M\",mod=m1,xlevels=list(M=c(1,2,3,4,5))) |> as.data.frame()\nggplot(data = ngv, aes(x=character,col=factor(M)))+\n  geom_jitter(aes(y=NGV),alpha=.1,height=0) +\n  geom_pointrange(data=plotm, aes(y=fit,ymin=lower,ymax=upper),\n                  position=position_dodge(width = .2))+\n  scale_color_viridis_d(\"Machiavellianism\",option=\"C\",direction = -1)+\n  theme_dark()\n\n```\n\n\n`r solend()`\n\n\n\n","srcMarkdownNoYaml":"\n\n```{r}\n#| label: setup\n#| include: false\nsource('assets/setup.R')\nlibrary(xaringanExtra)\nlibrary(tidyverse)\nlibrary(patchwork)\nlibrary(ggdist)\nxaringanExtra::use_panelset()\nqcounter <- function(){\n  if(!exists(\"qcounter_i\")){\n    qcounter_i <<- 1\n  }else{\n    qcounter_i <<- qcounter_i + 1\n  }\n  qcounter_i\n}\nlibrary(lme4)\n```\n\n# Video game agression and the dark triad \n\n:::frame\n__Dataset: NGV.csv__  \n\nThese data are from an experiment designed to investigate how the realism of video games is associated with more/less unnecessarily aggressive gameplay, and whether this differs depending upon a) the playing mode (playing on a screen vs VR headset), and b) individual differences in the 'dark triad' personality traits.  \n\nThe experiment involved playing 10 levels of a game in which the objective was to escape a maze. Various obstacles and other characters were present throughout the maze, and players could interact with these by side-stepping or jumping over them, or by pushing or shooting at them. All of these actions took the same amount of effort to complete (pressing a button), and each one achieved the same end (moving beyond the obstacle and being able to continue through the maze).  \n\nEach participant completed all 10 levels twice, once in which all characters were presented as cartoons, and once in which all characters were presented as realistic humans and animals. The layout of the level was identical in both, the only difference being the depiction of objects and characters. For each participant, these 20 levels ($2 \\times 10$ mazes) were presented in a random order. Half of the participants played via a screen, and the other half played via a VR headset. For each level played, we have a record of \"needless game violence\" (NGV) which was calculated via the number of aggressive (pushing/shooting) actions taken (+0.5 for every action that missed an object, +1 for every action aimed at an inanimate object, and +2 for every action aimed at an animate character).  \nPrior to the experiment, each participant completed the Short Dark Triad 3 (SD-3), which measures the three traits of machiavellianism, narcissism, and psychopathy.  \n\n```{r}\n#| echo: false\nngv <- read_csv(\"../../data/ngv.csv\")\ntibble(\n  variable=names(ngv),\n  description=c(\n    \"Participant number\",\n    \"Maze level (1 to 20)\",\n    \"Whether the objects and characters in the level were presented as 'cartoon' or as 'realistic'\",\n    \"Whether the participant played via a screen or with a VR headset\",\n    \"Psycopathy Trait from SD-3 (score 1-5)\",\n    \"Narcissism Trait from SD-3 (score 1-5)\",\n    \"Machiavellianism Trait from SD-3 (score 1-5)\",\n    \"Needless Game Violence metric\"\n  )\n) |> gt::gt()\n```\n\n\n\n:::\n\n`r qbegin(qcounter())`\nConduct an analysis to address the research aims!  \n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hints\n\n- There's a lot to unpack in the research aim: _\"how the realism of video games is associated with more/less unnecessarily aggressive gameplay, and whether this differs depending upon a) the playing mode (playing on a screen vs VR headset), and b) individual differences in the 'dark triad' personality traits.\"_    \n\n\n:::\n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\nm1 = lmer(NGV ~ character * (mode + P + M + N) + \n            (1 + character | PID) + \n            (1 + mode | level), data = ngv)\nsummary(m1)\n```\n\n```{r}\nlibrary(parameters)\nmodel_parameters(m1, ci_method=\"kr\") |> print_html()\n```\n\n\n\n`r solend()`\n\n`r qbegin(qcounter())`\nCheck the assumptions of your model\n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hints\n\nWe have a multilevel model, so we have assumptions at multiple levels! See [5A#mlm-assumptions-diagnostics](05a_assump.html#mlm-assumptions-diagnostics){target=\"_blank\"}.  \n\nBe careful - QQplots with few datapoints can make things look weirder than they are - try a histogram too \n\n\n:::\n\n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n```{r}\nplot(m1)\nplot(m1,\n     form = sqrt(abs(resid(.))) ~ fitted(.),\n     type = c(\"p\",\"smooth\"))\n```\n\n```{r echo=c(2,3,4,5)}\npar(mfrow=c(2,2))\nqqnorm(ranef(m1)$PID[,1],main=\"1|PID\");qqline(ranef(m1)$PID[,1])\nqqnorm(ranef(m1)$PID[,2],main=\"character|PID\");qqline(ranef(m1)$PID[,2])\nqqnorm(ranef(m1)$level[,1],main=\"1|level\");qqline(ranef(m1)$level[,1])\nqqnorm(ranef(m1)$level[,2],main=\"mode|level\");qqline(ranef(m1)$level[,2])\npar(mfrow=c(1,1))\n```\n```{r echo=c(2,3,4,5)}\npar(mfrow=c(2,2))\nhist(ranef(m1)$PID[,1],main=\"1|PID\")\nhist(ranef(m1)$PID[,2],main=\"character|PID\")\nhist(ranef(m1)$level[,1],main=\"1|level\")\nhist(ranef(m1)$level[,2],main=\"mode|level\")\npar(mfrow=c(1,1))\n```\n\n```{r}\nlibrary(performance)\ncheck_predictions(m1)\n```\n\n`r solend()`\n\n`r qbegin(qcounter())`\nCheck the extent to which your results may be sensitive to certain influential observations, or participants, or levels!  \n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hints\n\nSee [5A #influence](05a_assump.html#influence){target=\"_blank\"} for two packages that can assess influence. \n\n:::\n\n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\nlibrary(HLMdiag)\ninf1 <- hlm_influence(m1,level=1)\ndotplot_diag(inf1$cooksd, cutoff=\"internal\")\ninf2 <- hlm_influence(m1,level=\"PID\")\ndotplot_diag(inf2$cooksd, index=inf2$PID, cutoff=\"internal\")\ninf3 <- hlm_influence(m1,level=\"level\")\ndotplot_diag(inf3$cooksd, cutoff=\"internal\")\n```\n\n\n`r solend()`\n\n\n`r qbegin(qcounter())`\nWrite a short description of the sample data.  \n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n\n`r solend()`\n\n\n`r qbegin(qcounter())`\nWrite a short explanation of your methods\n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hints\n\n- explain any transformations to the data prior to modelling\n- explain the model(s) fitted and how they address the research aims\n- describe any actions taken as a result of non-convergence\n- what estimation method was used (ML, REML)? What software (including version and packages)? What optimiser? \n- if degrees of freedom were used, what kind? If not, how are inferences conducted?  \n- what assumptions of the model were checked, and what was the outcome?\n\n\n:::\n\n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n`r solend()`\n\n\n`r qbegin(qcounter())`\nWrite a short summary of your results, along with suitable visualisations and tables\n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hints\n\n- if model comparisons were conducted, provide results and what they mean  \n- present and interpret fixed effects estimates that are relevant to the research aim.  \n- discuss random effect estimates - does the relevant effect vary a lot between clusters?  \n- was the sensitivty of the results to influential observations/clusters assessed? if so, what did you find?\n\n\n:::\n\n\n`r qend()`\n`r solbegin(show=params$SHOW_SOLS, toggle=params$TOGGLE)`\n\n```{r}\nlibrary(effects)\n\nplotp <- effect(\"character*P\",mod=m1,xlevels=list(P=c(1,2,3,4,5))) |> as.data.frame()\n\nggplot(data = ngv, aes(x=character,col=factor(P)))+\n  geom_jitter(aes(y=NGV),alpha=.2,height=0) +\n  geom_pointrange(data=plotp, aes(y=fit,ymin=lower,ymax=upper),\n                  position=position_dodge(width = .2))+\n  scale_color_viridis_d(\"Psychopathy\",option=\"C\",direction = -1)+\n  theme_dark()\n```\n\n```{r}\nplotm <- effect(\"character*M\",mod=m1,xlevels=list(M=c(1,2,3,4,5))) |> as.data.frame()\nggplot(data = ngv, aes(x=character,col=factor(M)))+\n  geom_jitter(aes(y=NGV),alpha=.1,height=0) +\n  geom_pointrange(data=plotm, aes(y=fit,ymin=lower,ymax=upper),\n                  position=position_dodge(width = .2))+\n  scale_color_viridis_d(\"Machiavellianism\",option=\"C\",direction = -1)+\n  theme_dark()\n\n```\n\n\n`r solend()`\n\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"include-in-header":["assets/toggling.html"],"number-sections":false,"output-file":"05exBLACKWELL2.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.340","toc_float":true,"link-citations":true,"theme":["united","assets/style-labs.scss"],"title":"Week 5 Exercises: Assumptions, Diagnostics, Writing up","params":{"SHOW_SOLS":true,"TOGGLE":true},"editor_options":{"chunk_output_type":"console"}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}