{
  "hash": "0a02cbddffff85763d7eff200e920d94",
  "result": {
    "markdown": "---\ntitle: \"Week 10 Exercises: Structural Equation Modelling (SEM)\"\nparams: \n    SHOW_SOLS: FALSE\n    TOGGLE: TRUE\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n\n\n::: {.callout-note collapse=\"true\"}\n#### Measurement Error and the need for SEM\n\nWe have been mentioning Structural Equation Modelling (SEM) for a few weeks now, but we haven't been very clear on what exactly it is. Is it CFA? Is it Path Analysis? In fact it is both - it is the overarching framework of which CFA and Path Analysis are just particular cases. The beauty comes in when we put the CFA and Path Analysis approaches together.\n\nPath analysis, as we saw last week, offers a way of specifying and evaluating a *structural* model, in which variables relate to one another in various ways, via different (sometimes indirect) paths. Common models like our old friend multiple regression can be expressed in a Path Analysis framework.\n\nFactor Analysis, on the other hand, brings something absolutely crucial to the table - it allows us to mitigate some of the problems which are associated with measurement error by specifying the existence of some latent variable which is measured via some observed variables. No question can perfectly measure someone's level of \"anxiety\", but if we take a set of 10 carefully chosen questions, we can consider the shared covariance between those 10 questions to represent the construct that is common between all of them (they all ask, in different ways, about \"anxiety\"), also modeling the unique error with which each individual question represents the entire construct.  \n\nCombine them and we can reap the rewards of having both a *structural model* and a *measurement model*. The measurement model is our specification between the items we directly observed, and the latent variables of which we consider these items to be manifestations. The structural model is our specified model of the relationships between the latent variables.  \n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![SEM diagram. Measurement model in orange, Structural model in purple](images/semdiag.png){#fig-semmdiag fig-align='center' width=80%}\n:::\n:::\n\n\n:::frame\n__You can't test the structural model if the measurement model is bad__  \n\nIf you test the relationships between a set of latent factors, and they are not reliably measured by the observed items, then this error propagates up to influence the fit of the structural model.  \nTo test the measurement model, it is typical to *saturate* the structural model (i.e., allow all the latent variables to correlate with one another). This way any misfit is due to the measurement model only.  \n\nAlternatively, we can fit individual CFA models for each construct and assess their fit (making any reasonable adjustments if necessary) prior to then fitting the full SEM.\n\n:::\n\n:::\n\n# Exercising Exercises\n\n:::frame\n__Dataset: TPB_data.Rdata__  \n\nThe \"Theory of Planned Behaviour\" is a theory about why people engage in physical activity (i.e. exercise). \n\nThe theory is represented in the diagram in @fig-tpb (only the latent variables and not the measured items are shown). **Attitudes** refer to the extent to which a person has a favourable view of exercising; **subjective norms** refer to whether they believe others whose opinions they care about believe exercise to be a good thing; and **perceived behavioural control** refers to the extent to which they believe exercising is under their control. **Intentions** refer to whether a person intends to exercise and **behaviour** is a measure of the extent to which they exercised. Each construct is measured using four items. \n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Theory of planned behaviour (latent variables only)](images/TPB example.png){#fig-tpb fig-align='center' width=80%}\n:::\n:::\n\n\nThe data are available either:  \n\n+ as a .RData file: [https://uoepsy.github.io/data/TPB_data.Rdata](https://uoepsy.github.io/data/TPB_data.Rdata){target=\"_blank\"}\n+ as a .txt file: [https://uoepsy.github.io/data/TPB_data.txt](https://uoepsy.github.io/data/TPB_data.txt){target=\"_blank\"} \n\n:::\n\n\n\n<div class='question-begin'>Question 1</div><div class='question-body'>\n\n\nRead in the data using the appropriate function. We've given you **.csv** files for a long time now, but it's good to be prepared to encounter all sorts of weird filetypes. \n\nCan you successfully read in from both types of data?  \n\n\n</div><p class=\"question-end\"></p>\n\n \n\n\n<div style=\"display:none;\">\n\n\nEither one or the other of:\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nload(url(\"https://uoepsy.github.io/data/TPB_data.Rdata\"))\n\nTPB_data <- read.table(\"https://uoepsy.github.io/data/TPB_data.txt\", header = TRUE, sep = \"\\t\")\n```\n:::\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n\n\n<div class='question-begin'>Question 2</div><div class='question-body'>\n\n\nTest separate one-factor models for each construct.  \nAre the measurement models satisfactory? *(check their fit measures)*. \n\n\n</div><p class=\"question-end\"></p>\n\n \n\n\n<div style=\"display:none;\">\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# specify one factor CFA model for attitudes\nattitude_model <- 'att =~ attitude1 + attitude2 + attitude3 + attitude4'\n# estimate the model\nattitude_model.est <- cfa(attitude_model, data=TPB_data)\n# inspect the output\nsummary(attitude_model.est, fit.measures=T, standardized=T)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nlavaan 0.6.17 ended normally after 19 iterations\n\n  Estimator                                         ML\n  Optimization method                           NLMINB\n  Number of model parameters                         8\n\n  Number of observations                           890\n\nModel Test User Model:\n                                                      \n  Test statistic                                 0.175\n  Degrees of freedom                                 2\n  P-value (Chi-square)                           0.916\n\nModel Test Baseline Model:\n\n  Test statistic                              1032.173\n  Degrees of freedom                                 6\n  P-value                                        0.000\n\nUser Model versus Baseline Model:\n\n  Comparative Fit Index (CFI)                    1.000\n  Tucker-Lewis Index (TLI)                       1.005\n\nLoglikelihood and Information Criteria:\n\n  Loglikelihood user model (H0)              -4620.704\n  Loglikelihood unrestricted model (H1)      -4620.616\n                                                      \n  Akaike (AIC)                                9257.408\n  Bayesian (BIC)                              9295.737\n  Sample-size adjusted Bayesian (SABIC)       9270.331\n\nRoot Mean Square Error of Approximation:\n\n  RMSEA                                          0.000\n  90 Percent confidence interval - lower         0.000\n  90 Percent confidence interval - upper         0.025\n  P-value H_0: RMSEA <= 0.050                    0.990\n  P-value H_0: RMSEA >= 0.080                    0.000\n\nStandardized Root Mean Square Residual:\n\n  SRMR                                           0.002\n\nParameter Estimates:\n\n  Standard errors                             Standard\n  Information                                 Expected\n  Information saturated (h1) model          Structured\n\nLatent Variables:\n                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all\n  att =~                                                                \n    attitude1         1.000                               0.705    0.685\n    attitude2         1.052    0.062   17.093    0.000    0.742    0.722\n    attitude3         0.989    0.060   16.432    0.000    0.698    0.681\n    attitude4         1.060    0.061   17.270    0.000    0.747    0.736\n\nVariances:\n                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all\n   .attitude1         0.562    0.035   16.245    0.000    0.562    0.531\n   .attitude2         0.505    0.033   15.077    0.000    0.505    0.478\n   .attitude3         0.563    0.034   16.365    0.000    0.563    0.537\n   .attitude4         0.474    0.032   14.582    0.000    0.474    0.459\n    att               0.497    0.048   10.371    0.000    1.000    1.000\n```\n:::\n\n```{.r .cell-code}\n#check the model fit and that RMSEA<.05, SRMR<.05, TLI>0.95 and CFI>.95 and that all loadings are significant and >|.30|\nmodificationindices(attitude_model.est)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         lhs op       rhs    mi    epc sepc.lv sepc.all sepc.nox\n10 attitude1 ~~ attitude2 0.040 -0.006  -0.006   -0.011   -0.011\n11 attitude1 ~~ attitude3 0.049 -0.006  -0.006   -0.011   -0.011\n12 attitude1 ~~ attitude4 0.176  0.013   0.013    0.025    0.025\n13 attitude2 ~~ attitude3 0.176  0.013   0.013    0.024    0.024\n14 attitude2 ~~ attitude4 0.049 -0.007  -0.007   -0.015   -0.015\n15 attitude3 ~~ attitude4 0.040 -0.006  -0.006   -0.012   -0.012\n```\n:::\n\n```{.r .cell-code}\n#check the largest modification indices to see if the expected parameter changes are large enough to justify any additional parameters in the  model\n```\n:::\n\n\nThe above code shows you the steps you should run through for the attitudes construct. You should repeat these steps for each of:  \n\n+ attitudes  \n+ subjective norms  \n+ perceived behavioural control  \n+ intentions  \n+ behaviour  \n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n\n\n<div class='question-begin'>Question 3</div><div class='question-body'>\n\n\nUsing lavaan syntax, specify a structural equation model that corresponds to the model in Figure \\@ref(fig:tpb). For each construct use a latent variable measured by the corresponding items in the dataset. \n\n\n</div><p class=\"question-end\"></p>\n\n \n\n\n<div style=\"display:none;\">\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nTPB_model<-'\n#measurement models for attitudes, subjective norms and perceived behavioural control\n  \n  att =~ attitude1 + attitude2 + attitude3 + attitude4\n  SN =~ SN1 + SN2 + SN3 + SN4\n  PBC =~ PBC1 + PBC2 + PBC3 + PBC4\n  intent =~ int1 + int2 + int3 + int4\n  beh =~ beh1 + beh2 + beh3 + beh4\n\n#regressions  \n\n  beh ~ intent + PBC\n  intent ~ att + SN + PBC\n\n#covariances between attitudes, subjective norms and perceived behavioural control\n  \n  att ~~ SN    \n  att ~~ PBC\n  SN ~~ PBC\n'\n```\n:::\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n\n\n<div class='question-begin'>Question 4</div><div class='question-body'>\n\n\nEstimate the model from Question A4 and evaluate the model  \n\n+ Does the model fit well?  \n+ Are the hypothesised paths significant?  \n\n\n\n</div><p class=\"question-end\"></p>\n\n \n\n\n<div style=\"display:none;\">\n\n\n\nWe can estimate the model using the `sem()` function.  \nBy default the `sem()` function will scale the latent variables by fixing the loading of the first item for each latent variable to 1 but we can override this by setting `std.lv=T` if we wanted to. By default, maximum likelihood estimation will be used.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nTPB_model.est<-sem(TPB_model, data=TPB_data, std.lv=T)\n\nsummary(TPB_model.est, fit.measures=T, standardized=T)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nlavaan 0.6.17 ended normally after 24 iterations\n\n  Estimator                                         ML\n  Optimization method                           NLMINB\n  Number of model parameters                        48\n\n  Number of observations                           890\n\nModel Test User Model:\n                                                      \n  Test statistic                               157.059\n  Degrees of freedom                               162\n  P-value (Chi-square)                           0.595\n\nModel Test Baseline Model:\n\n  Test statistic                              5335.624\n  Degrees of freedom                               190\n  P-value                                        0.000\n\nUser Model versus Baseline Model:\n\n  Comparative Fit Index (CFI)                    1.000\n  Tucker-Lewis Index (TLI)                       1.001\n\nLoglikelihood and Information Criteria:\n\n  Loglikelihood user model (H0)             -24403.833\n  Loglikelihood unrestricted model (H1)     -24325.304\n                                                      \n  Akaike (AIC)                               48903.667\n  Bayesian (BIC)                             49133.646\n  Sample-size adjusted Bayesian (SABIC)      48981.207\n\nRoot Mean Square Error of Approximation:\n\n  RMSEA                                          0.000\n  90 Percent confidence interval - lower         0.000\n  90 Percent confidence interval - upper         0.014\n  P-value H_0: RMSEA <= 0.050                    1.000\n  P-value H_0: RMSEA >= 0.080                    0.000\n\nStandardized Root Mean Square Residual:\n\n  SRMR                                           0.023\n\nParameter Estimates:\n\n  Standard errors                             Standard\n  Information                                 Expected\n  Information saturated (h1) model          Structured\n\nLatent Variables:\n                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all\n  att =~                                                                \n    attitude1         0.710    0.034   21.152    0.000    0.710    0.689\n    attitude2         0.746    0.033   22.590    0.000    0.746    0.726\n    attitude3         0.707    0.033   21.155    0.000    0.707    0.689\n    attitude4         0.730    0.033   22.298    0.000    0.730    0.719\n  SN =~                                                                 \n    SN1               0.685    0.036   18.786    0.000    0.685    0.661\n    SN2               0.673    0.036   18.466    0.000    0.673    0.651\n    SN3               0.646    0.037   17.369    0.000    0.646    0.616\n    SN4               0.681    0.038   18.064    0.000    0.681    0.638\n  PBC =~                                                                \n    PBC1              0.776    0.029   27.045    0.000    0.776    0.799\n    PBC2              0.728    0.028   25.777    0.000    0.728    0.772\n    PBC3              0.709    0.028   25.023    0.000    0.709    0.756\n    PBC4              0.747    0.029   25.813    0.000    0.747    0.773\n  intent =~                                                             \n    int1              0.459    0.033   14.067    0.000    0.708    0.584\n    int2              0.535    0.035   15.144    0.000    0.824    0.646\n    int3              0.513    0.035   14.794    0.000    0.791    0.625\n    int4              0.492    0.034   14.300    0.000    0.759    0.597\n  beh =~                                                                \n    beh1              0.623    0.039   16.044    0.000    0.808    0.649\n    beh2              0.584    0.039   15.022    0.000    0.758    0.599\n    beh3              0.576    0.039   14.782    0.000    0.748    0.588\n    beh4              0.599    0.040   15.153    0.000    0.777    0.605\n\nRegressions:\n                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all\n  beh ~                                                                 \n    intent            0.426    0.057    7.513    0.000    0.506    0.506\n    PBC               0.241    0.071    3.373    0.001    0.185    0.185\n  intent ~                                                              \n    att               0.553    0.069    8.010    0.000    0.359    0.359\n    SN                0.302    0.064    4.692    0.000    0.196    0.196\n    PBC               0.756    0.073   10.364    0.000    0.490    0.490\n\nCovariances:\n                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all\n  att ~~                                                                \n    SN                0.320    0.040    7.938    0.000    0.320    0.320\n    PBC               0.253    0.038    6.611    0.000    0.253    0.253\n  SN ~~                                                                 \n    PBC               0.196    0.041    4.800    0.000    0.196    0.196\n\nVariances:\n                   Estimate  Std.Err  z-value  P(>|z|)   Std.lv  Std.all\n   .attitude1         0.556    0.034   16.511    0.000    0.556    0.525\n   .attitude2         0.498    0.032   15.415    0.000    0.498    0.472\n   .attitude3         0.551    0.033   16.509    0.000    0.551    0.525\n   .attitude4         0.498    0.032   15.658    0.000    0.498    0.483\n   .SN1               0.605    0.039   15.384    0.000    0.605    0.563\n   .SN2               0.616    0.039   15.689    0.000    0.616    0.577\n   .SN3               0.681    0.041   16.608    0.000    0.681    0.620\n   .SN4               0.676    0.042   16.047    0.000    0.676    0.593\n   .PBC1              0.341    0.023   15.163    0.000    0.341    0.362\n   .PBC2              0.359    0.022   16.144    0.000    0.359    0.404\n   .PBC3              0.377    0.023   16.639    0.000    0.377    0.429\n   .PBC4              0.376    0.023   16.119    0.000    0.376    0.403\n   .int1              0.969    0.054   18.096    0.000    0.969    0.659\n   .int2              0.949    0.056   16.914    0.000    0.949    0.583\n   .int3              0.976    0.056   17.371    0.000    0.976    0.610\n   .int4              1.042    0.058   17.889    0.000    1.042    0.644\n   .beh1              0.900    0.057   15.656    0.000    0.900    0.579\n   .beh2              1.026    0.061   16.918    0.000    1.026    0.641\n   .beh3              1.057    0.062   17.152    0.000    1.057    0.654\n   .beh4              1.045    0.062   16.783    0.000    1.045    0.634\n    att               1.000                               1.000    1.000\n    SN                1.000                               1.000    1.000\n    PBC               1.000                               1.000    1.000\n   .intent            1.000                               0.421    0.421\n   .beh               1.000                               0.593    0.593\n```\n:::\n:::\n\n\nWe can see that the model fits well according to RMSEA, SRMR, TLI and CFI. All of the hypothesised paths in the theory of planned behaviour are statistically significant.\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n\n\n<div class='question-begin'>Question 5</div><div class='question-body'>\n\n\nExamine the modification indices and expected parameter changes - are there any additional parameters you would consider including?  \n\n\n</div><p class=\"question-end\"></p>\n\n \n\n\n<div style=\"display:none;\">\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmodindices(TPB_model.est)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n          lhs op       rhs     mi    epc sepc.lv sepc.all sepc.nox\n54        att =~       SN1  1.663  0.049   0.049    0.047    0.047\n55        att =~       SN2  3.197  0.067   0.067    0.065    0.065\n56        att =~       SN3  1.283 -0.043  -0.043   -0.041   -0.041\n57        att =~       SN4  4.294 -0.081  -0.081   -0.076   -0.076\n58        att =~      PBC1  0.350 -0.016  -0.016   -0.017   -0.017\n59        att =~      PBC2  1.394  0.032   0.032    0.034    0.034\n60        att =~      PBC3  0.133 -0.010  -0.010   -0.011   -0.011\n61        att =~      PBC4  0.043 -0.006  -0.006   -0.006   -0.006\n62        att =~      int1  0.002 -0.003  -0.003   -0.002   -0.002\n63        att =~      int2  0.014 -0.007  -0.007   -0.005   -0.005\n64        att =~      int3  0.379  0.035   0.035    0.027    0.027\n65        att =~      int4  0.243 -0.028  -0.028   -0.022   -0.022\n66        att =~      beh1  0.134 -0.016  -0.016   -0.013   -0.013\n67        att =~      beh2  0.844  0.042   0.042    0.034    0.034\n68        att =~      beh3  0.033  0.008   0.008    0.007    0.007\n69        att =~      beh4  0.420 -0.030  -0.030   -0.024   -0.024\n70         SN =~ attitude1  0.923  0.035   0.035    0.034    0.034\n71         SN =~ attitude2  0.454  0.024   0.024    0.023    0.023\n72         SN =~ attitude3  0.054  0.008   0.008    0.008    0.008\n73         SN =~ attitude4  3.291 -0.064  -0.064   -0.063   -0.063\n74         SN =~      PBC1  0.216 -0.013  -0.013   -0.013   -0.013\n75         SN =~      PBC2  1.679  0.036   0.036    0.038    0.038\n76         SN =~      PBC3  0.485 -0.019  -0.019   -0.021   -0.021\n77         SN =~      PBC4  0.034 -0.005  -0.005   -0.005   -0.005\n78         SN =~      int1  2.659 -0.080  -0.080   -0.066   -0.066\n79         SN =~      int2  0.050 -0.011  -0.011   -0.009   -0.009\n80         SN =~      int3  0.269  0.027   0.027    0.021    0.021\n81         SN =~      int4  1.081  0.054   0.054    0.042    0.042\n82         SN =~      beh1  2.904 -0.075  -0.075   -0.060   -0.060\n83         SN =~      beh2  0.263  0.023   0.023    0.019    0.019\n84         SN =~      beh3  1.906  0.064   0.064    0.050    0.050\n85         SN =~      beh4  0.202  0.021   0.021    0.016    0.016\n86        PBC =~ attitude1  1.435 -0.039  -0.039   -0.038   -0.038\n87        PBC =~ attitude2  0.256  0.016   0.016    0.016    0.016\n88        PBC =~ attitude3  1.785  0.043   0.043    0.042    0.042\n89        PBC =~ attitude4  0.415 -0.020  -0.020   -0.020   -0.020\n90        PBC =~       SN1  0.103  0.011   0.011    0.011    0.011\n91        PBC =~       SN2  1.946  0.048   0.048    0.046    0.046\n92        PBC =~       SN3  3.081 -0.061  -0.061   -0.058   -0.058\n93        PBC =~       SN4  0.005 -0.002  -0.002   -0.002   -0.002\n94        PBC =~      int1  0.043 -0.012  -0.012   -0.010   -0.010\n95        PBC =~      int2  0.064  0.016   0.016    0.012    0.012\n96        PBC =~      int3  0.000  0.001   0.001    0.001    0.001\n97        PBC =~      int4  0.007 -0.005  -0.005   -0.004   -0.004\n98        PBC =~      beh1  0.005 -0.004  -0.004   -0.003   -0.003\n99        PBC =~      beh2  1.367  0.063   0.063    0.050    0.050\n100       PBC =~      beh3  0.001 -0.001  -0.001   -0.001   -0.001\n101       PBC =~      beh4  1.119 -0.058  -0.058   -0.045   -0.045\n102    intent =~ attitude1  0.043  0.006   0.009    0.009    0.009\n103    intent =~ attitude2  0.353  0.016   0.025    0.025    0.025\n104    intent =~ attitude3  3.425  0.051   0.079    0.077    0.077\n105    intent =~ attitude4  6.558 -0.070  -0.108   -0.106   -0.106\n106    intent =~       SN1  0.024  0.004   0.006    0.006    0.006\n107    intent =~       SN2  4.489  0.056   0.086    0.084    0.084\n108    intent =~       SN3  1.063 -0.028  -0.043   -0.041   -0.041\n109    intent =~       SN4  1.761 -0.036  -0.056   -0.052   -0.052\n110    intent =~      PBC1  0.058 -0.006  -0.009   -0.010   -0.010\n111    intent =~      PBC2  0.656  0.020   0.031    0.033    0.033\n112    intent =~      PBC3  0.069 -0.007  -0.010   -0.011   -0.011\n113    intent =~      PBC4  0.092 -0.008  -0.012   -0.012   -0.012\n114    intent =~      beh1  0.008  0.004   0.006    0.005    0.005\n115    intent =~      beh2  0.306 -0.025  -0.039   -0.031   -0.031\n116    intent =~      beh3  1.632  0.059   0.091    0.071    0.071\n117    intent =~      beh4  0.630 -0.037  -0.057   -0.044   -0.044\n118       beh =~ attitude1  0.187 -0.012  -0.016   -0.015   -0.015\n119       beh =~ attitude2  1.049 -0.028  -0.036   -0.035   -0.035\n120       beh =~ attitude3  6.156  0.068   0.089    0.087    0.087\n121       beh =~ attitude4  0.815 -0.024  -0.031   -0.031   -0.031\n122       beh =~       SN1  0.084  0.008   0.011    0.010    0.010\n123       beh =~       SN2  1.865  0.039   0.051    0.049    0.049\n124       beh =~       SN3  2.447 -0.046  -0.059   -0.057   -0.057\n125       beh =~       SN4  0.009  0.003   0.004    0.003    0.003\n126       beh =~      PBC1  0.923  0.026   0.033    0.034    0.034\n127       beh =~      PBC2  0.127 -0.009  -0.012   -0.013   -0.013\n128       beh =~      PBC3  0.478  0.018   0.024    0.025    0.025\n129       beh =~      PBC4  1.692 -0.035  -0.046   -0.047   -0.047\n130       beh =~      int1  0.556 -0.038  -0.049   -0.040   -0.040\n131       beh =~      int2  1.705  0.069   0.089    0.070    0.070\n132       beh =~      int3  0.140 -0.020  -0.025   -0.020   -0.020\n133       beh =~      int4  0.260 -0.027  -0.035   -0.027   -0.027\n134 attitude1 ~~ attitude2  0.587 -0.022  -0.022   -0.041   -0.041\n135 attitude1 ~~ attitude3  0.930 -0.026  -0.026   -0.048   -0.048\n136 attitude1 ~~ attitude4  1.278  0.031   0.031    0.059    0.059\n137 attitude1 ~~       SN1  0.738  0.021   0.021    0.035    0.035\n138 attitude1 ~~       SN2  0.068  0.006   0.006    0.011    0.011\n139 attitude1 ~~       SN3  0.258  0.013   0.013    0.020    0.020\n140 attitude1 ~~       SN4  0.446 -0.017  -0.017   -0.027   -0.027\n141 attitude1 ~~      PBC1  2.436 -0.029  -0.029   -0.066   -0.066\n142 attitude1 ~~      PBC2  0.070 -0.005  -0.005   -0.011   -0.011\n143 attitude1 ~~      PBC3  0.033  0.003   0.003    0.007    0.007\n144 attitude1 ~~      PBC4  0.031  0.003   0.003    0.007    0.007\n145 attitude1 ~~      int1  0.075  0.008   0.008    0.011    0.011\n146 attitude1 ~~      int2  0.476 -0.020  -0.020   -0.028   -0.028\n147 attitude1 ~~      int3  3.310  0.054   0.054    0.073    0.073\n148 attitude1 ~~      int4  0.254  0.015   0.015    0.020    0.020\n149 attitude1 ~~      beh1  1.811  0.039   0.039    0.055    0.055\n150 attitude1 ~~      beh2  0.045  0.006   0.006    0.008    0.008\n151 attitude1 ~~      beh3  0.490 -0.021  -0.021   -0.028   -0.028\n152 attitude1 ~~      beh4  2.283 -0.046  -0.046   -0.060   -0.060\n153 attitude2 ~~ attitude3  0.234 -0.014  -0.014   -0.026   -0.026\n154 attitude2 ~~ attitude4  0.582  0.022   0.022    0.044    0.044\n155 attitude2 ~~       SN1  9.972  0.073   0.073    0.133    0.133\n156 attitude2 ~~       SN2  2.493 -0.037  -0.037   -0.066   -0.066\n157 attitude2 ~~       SN3  0.257 -0.012  -0.012   -0.021   -0.021\n158 attitude2 ~~       SN4  0.314 -0.014  -0.014   -0.023   -0.023\n159 attitude2 ~~      PBC1  0.342 -0.010  -0.010   -0.025   -0.025\n160 attitude2 ~~      PBC2  0.529  0.013   0.013    0.031    0.031\n161 attitude2 ~~      PBC3  0.302  0.010   0.010    0.023    0.023\n162 attitude2 ~~      PBC4  0.002 -0.001  -0.001   -0.002   -0.002\n163 attitude2 ~~      int1  2.209  0.042   0.042    0.060    0.060\n164 attitude2 ~~      int2  0.020 -0.004  -0.004   -0.006   -0.006\n165 attitude2 ~~      int3  0.001 -0.001  -0.001   -0.001   -0.001\n166 attitude2 ~~      int4  0.063  0.007   0.007    0.010    0.010\n167 attitude2 ~~      beh1  0.447 -0.019  -0.019   -0.028   -0.028\n168 attitude2 ~~      beh2  1.233  0.032   0.032    0.045    0.045\n169 attitude2 ~~      beh3  8.914 -0.088  -0.088   -0.121   -0.121\n170 attitude2 ~~      beh4  0.000  0.000   0.000    0.000    0.000\n171 attitude3 ~~ attitude4  0.084  0.008   0.008    0.015    0.015\n172 attitude3 ~~       SN1  2.870 -0.040  -0.040   -0.070   -0.070\n173 attitude3 ~~       SN2  4.497  0.051   0.051    0.087    0.087\n174 attitude3 ~~       SN3  0.029 -0.004  -0.004   -0.007   -0.007\n175 attitude3 ~~       SN4  0.303 -0.014  -0.014   -0.022   -0.022\n176 attitude3 ~~      PBC1  1.372  0.021   0.021    0.049    0.049\n177 attitude3 ~~      PBC2  0.044  0.004   0.004    0.009    0.009\n178 attitude3 ~~      PBC3  0.001  0.000   0.000   -0.001   -0.001\n179 attitude3 ~~      PBC4  1.608 -0.024  -0.024   -0.052   -0.052\n180 attitude3 ~~      int1  0.005  0.002   0.002    0.003    0.003\n181 attitude3 ~~      int2  0.112  0.010   0.010    0.014    0.014\n182 attitude3 ~~      int3  0.005  0.002   0.002    0.003    0.003\n183 attitude3 ~~      int4  0.031  0.005   0.005    0.007    0.007\n184 attitude3 ~~      beh1  0.123 -0.010  -0.010   -0.014   -0.014\n185 attitude3 ~~      beh2  0.000  0.000   0.000    0.000    0.000\n186 attitude3 ~~      beh3  3.529  0.057   0.057    0.074    0.074\n187 attitude3 ~~      beh4  1.412  0.036   0.036    0.047    0.047\n188 attitude4 ~~       SN1  0.783 -0.020  -0.020   -0.037   -0.037\n189 attitude4 ~~       SN2  0.173  0.010   0.010    0.017    0.017\n190 attitude4 ~~       SN3  0.696 -0.020  -0.020   -0.034   -0.034\n191 attitude4 ~~       SN4  0.000  0.000   0.000    0.001    0.001\n192 attitude4 ~~      PBC1  0.143  0.007   0.007    0.016    0.016\n193 attitude4 ~~      PBC2  0.063  0.004   0.004    0.011    0.011\n194 attitude4 ~~      PBC3  0.901 -0.017  -0.017   -0.039   -0.039\n195 attitude4 ~~      PBC4  0.964  0.018   0.018    0.041    0.041\n196 attitude4 ~~      int1  2.923 -0.048  -0.048   -0.069   -0.069\n197 attitude4 ~~      int2  0.170  0.012   0.012    0.017    0.017\n198 attitude4 ~~      int3  1.396 -0.034  -0.034   -0.048   -0.048\n199 attitude4 ~~      int4  2.376 -0.045  -0.045   -0.062   -0.062\n200 attitude4 ~~      beh1  0.276 -0.015  -0.015   -0.022   -0.022\n201 attitude4 ~~      beh2  0.036  0.006   0.006    0.008    0.008\n202 attitude4 ~~      beh3  1.806  0.039   0.039    0.054    0.054\n203 attitude4 ~~      beh4  0.122 -0.010  -0.010   -0.014   -0.014\n204       SN1 ~~       SN2  3.906 -0.069  -0.069   -0.114   -0.114\n205       SN1 ~~       SN3  1.516  0.042   0.042    0.066    0.066\n206       SN1 ~~       SN4  0.187  0.015   0.015    0.024    0.024\n207       SN1 ~~      PBC1  0.563 -0.015  -0.015   -0.032   -0.032\n208       SN1 ~~      PBC2  0.396  0.012   0.012    0.026    0.026\n209       SN1 ~~      PBC3  1.548  0.025   0.025    0.051    0.051\n210       SN1 ~~      PBC4  0.348 -0.012  -0.012   -0.025   -0.025\n211       SN1 ~~      int1  0.183 -0.013  -0.013   -0.017   -0.017\n212       SN1 ~~      int2  0.117 -0.011  -0.011   -0.014   -0.014\n213       SN1 ~~      int3  2.133 -0.045  -0.045   -0.059   -0.059\n214       SN1 ~~      int4  0.802  0.028   0.028    0.036    0.036\n215       SN1 ~~      beh1  0.345  0.018   0.018    0.024    0.024\n216       SN1 ~~      beh2  0.044 -0.007  -0.007   -0.008   -0.008\n217       SN1 ~~      beh3  3.760 -0.062  -0.062   -0.078   -0.078\n218       SN1 ~~      beh4  2.978  0.056   0.056    0.070    0.070\n219       SN2 ~~       SN3  0.193 -0.015  -0.015   -0.023   -0.023\n220       SN2 ~~       SN4  0.946  0.034   0.034    0.053    0.053\n221       SN2 ~~      PBC1  0.086  0.006   0.006    0.012    0.012\n222       SN2 ~~      PBC2  0.099  0.006   0.006    0.013    0.013\n223       SN2 ~~      PBC3  0.271 -0.010  -0.010   -0.021   -0.021\n224       SN2 ~~      PBC4  0.077  0.006   0.006    0.012    0.012\n225       SN2 ~~      int1  0.014 -0.004  -0.004   -0.005   -0.005\n226       SN2 ~~      int2  1.097  0.033   0.033    0.043    0.043\n227       SN2 ~~      int3  0.058 -0.008  -0.008   -0.010   -0.010\n228       SN2 ~~      int4  0.343  0.019   0.019    0.023    0.023\n229       SN2 ~~      beh1  0.980 -0.030  -0.030   -0.041   -0.041\n230       SN2 ~~      beh2  0.065  0.008   0.008    0.010    0.010\n231       SN2 ~~      beh3  3.600  0.061   0.061    0.076    0.076\n232       SN2 ~~      beh4  0.612 -0.025  -0.025   -0.031   -0.031\n233       SN3 ~~       SN4  0.043 -0.007  -0.007   -0.010   -0.010\n234       SN3 ~~      PBC1  0.047 -0.004  -0.004   -0.009   -0.009\n235       SN3 ~~      PBC2  0.109  0.007   0.007    0.013    0.013\n236       SN3 ~~      PBC3  2.593 -0.033  -0.033   -0.065   -0.065\n237       SN3 ~~      PBC4  0.002 -0.001  -0.001   -0.002   -0.002\n238       SN3 ~~      int1  2.489 -0.050  -0.050   -0.061   -0.061\n239       SN3 ~~      int2  0.694 -0.027  -0.027   -0.033   -0.033\n240       SN3 ~~      int3 11.073  0.107   0.107    0.131    0.131\n241       SN3 ~~      int4  0.503  0.023   0.023    0.028    0.028\n242       SN3 ~~      beh1  0.295 -0.017  -0.017   -0.022   -0.022\n243       SN3 ~~      beh2  0.624 -0.026  -0.026   -0.031   -0.031\n244       SN3 ~~      beh3  0.163 -0.013  -0.013   -0.016   -0.016\n245       SN3 ~~      beh4  0.133  0.012   0.012    0.014    0.014\n246       SN4 ~~      PBC1  0.074  0.006   0.006    0.011    0.011\n247       SN4 ~~      PBC2  0.008 -0.002  -0.002   -0.004   -0.004\n248       SN4 ~~      PBC3  0.000  0.000   0.000    0.000    0.000\n249       SN4 ~~      PBC4  0.080  0.006   0.006    0.012    0.012\n250       SN4 ~~      int1  0.034  0.006   0.006    0.007    0.007\n251       SN4 ~~      int2  0.019 -0.004  -0.004   -0.006   -0.006\n252       SN4 ~~      int3  0.802 -0.029  -0.029   -0.036   -0.036\n253       SN4 ~~      int4  0.917 -0.032  -0.032   -0.038   -0.038\n254       SN4 ~~      beh1  1.596 -0.040  -0.040   -0.052   -0.052\n255       SN4 ~~      beh2  2.241  0.050   0.050    0.060    0.060\n256       SN4 ~~      beh3  3.345  0.061   0.061    0.073    0.073\n257       SN4 ~~      beh4  0.240 -0.016  -0.016   -0.020   -0.020\n258      PBC1 ~~      PBC2  0.368 -0.012  -0.012   -0.034   -0.034\n259      PBC1 ~~      PBC3  0.246 -0.010  -0.010   -0.027   -0.027\n260      PBC1 ~~      PBC4  0.777  0.018   0.018    0.050    0.050\n261      PBC1 ~~      int1  0.018  0.003   0.003    0.005    0.005\n262      PBC1 ~~      int2  0.879 -0.022  -0.022   -0.040   -0.040\n263      PBC1 ~~      int3  0.008 -0.002  -0.002   -0.004   -0.004\n264      PBC1 ~~      int4  0.284  0.013   0.013    0.022    0.022\n265      PBC1 ~~      beh1  3.313 -0.043  -0.043   -0.078   -0.078\n266      PBC1 ~~      beh2  6.404  0.062   0.062    0.105    0.105\n267      PBC1 ~~      beh3  0.350  0.015   0.015    0.025    0.025\n268      PBC1 ~~      beh4  0.353  0.015   0.015    0.025    0.025\n269      PBC2 ~~      PBC3  0.437  0.012   0.012    0.033    0.033\n270      PBC2 ~~      PBC4  0.033 -0.003  -0.003   -0.009   -0.009\n271      PBC2 ~~      int1  0.031  0.004   0.004    0.007    0.007\n272      PBC2 ~~      int2  0.194  0.011   0.011    0.018    0.018\n273      PBC2 ~~      int3  0.093 -0.007  -0.007   -0.012   -0.012\n274      PBC2 ~~      int4  0.002 -0.001  -0.001   -0.002   -0.002\n275      PBC2 ~~      beh1  0.087  0.007   0.007    0.012    0.012\n276      PBC2 ~~      beh2  2.826 -0.041  -0.041   -0.068   -0.068\n277      PBC2 ~~      beh3  0.060 -0.006  -0.006   -0.010   -0.010\n278      PBC2 ~~      beh4  0.186  0.011   0.011    0.018    0.018\n279      PBC3 ~~      PBC4  0.068 -0.005  -0.005   -0.013   -0.013\n280      PBC3 ~~      int1  0.356  0.014   0.014    0.024    0.024\n281      PBC3 ~~      int2  0.487  0.017   0.017    0.028    0.028\n282      PBC3 ~~      int3  1.378 -0.029  -0.029   -0.047   -0.047\n283      PBC3 ~~      int4  0.292 -0.013  -0.013   -0.021   -0.021\n284      PBC3 ~~      beh1  0.458  0.016   0.016    0.028    0.028\n285      PBC3 ~~      beh2  0.000  0.000   0.000    0.001    0.001\n286      PBC3 ~~      beh3  0.108  0.008   0.008    0.013    0.013\n287      PBC3 ~~      beh4  0.048  0.006   0.006    0.009    0.009\n288      PBC4 ~~      int1  1.150 -0.026  -0.026   -0.043   -0.043\n289      PBC4 ~~      int2  0.011 -0.003  -0.003   -0.004   -0.004\n290      PBC4 ~~      int3  2.882  0.042   0.042    0.069    0.069\n291      PBC4 ~~      int4  0.000  0.000   0.000    0.000    0.000\n292      PBC4 ~~      beh1  0.507  0.017   0.017    0.030    0.030\n293      PBC4 ~~      beh2  0.419  0.016   0.016    0.026    0.026\n294      PBC4 ~~      beh3  1.507 -0.031  -0.031   -0.050   -0.050\n295      PBC4 ~~      beh4  4.308 -0.053  -0.053   -0.085   -0.085\n296      int1 ~~      int2  0.334 -0.024  -0.024   -0.025   -0.025\n297      int1 ~~      int3  2.242  0.062   0.062    0.064    0.064\n298      int1 ~~      int4  0.450  0.028   0.028    0.028    0.028\n299      int1 ~~      beh1  0.002 -0.002  -0.002   -0.002   -0.002\n300      int1 ~~      beh2  0.010  0.004   0.004    0.004    0.004\n301      int1 ~~      beh3  0.447 -0.026  -0.026   -0.026   -0.026\n302      int1 ~~      beh4  0.102 -0.012  -0.012   -0.012   -0.012\n303      int2 ~~      int3  0.956 -0.043  -0.043   -0.044   -0.044\n304      int2 ~~      int4  0.398  0.028   0.028    0.028    0.028\n305      int2 ~~      beh1  3.497  0.071   0.071    0.077    0.077\n306      int2 ~~      beh2  3.910 -0.078  -0.078   -0.079   -0.079\n307      int2 ~~      beh3  0.155  0.016   0.016    0.016    0.016\n308      int2 ~~      beh4  1.241  0.044   0.044    0.044    0.044\n309      int3 ~~      int4  0.925 -0.042  -0.042   -0.041   -0.041\n310      int3 ~~      beh1  0.001  0.001   0.001    0.001    0.001\n311      int3 ~~      beh2  0.023 -0.006  -0.006   -0.006   -0.006\n312      int3 ~~      beh3  0.001  0.001   0.001    0.001    0.001\n313      int3 ~~      beh4  0.158 -0.016  -0.016   -0.016   -0.016\n314      int4 ~~      beh1  0.295 -0.021  -0.021   -0.022   -0.022\n315      int4 ~~      beh2  1.510 -0.049  -0.049   -0.048   -0.048\n316      int4 ~~      beh3  3.937  0.081   0.081    0.077    0.077\n317      int4 ~~      beh4  0.551 -0.030  -0.030   -0.029   -0.029\n318      beh1 ~~      beh2  0.009 -0.005  -0.005   -0.005   -0.005\n319      beh1 ~~      beh3  1.786 -0.065  -0.065   -0.066   -0.066\n320      beh1 ~~      beh4  1.863  0.067   0.067    0.070    0.070\n321      beh2 ~~      beh3  0.250  0.024   0.024    0.023    0.023\n322      beh2 ~~      beh4  0.156 -0.019  -0.019   -0.019   -0.019\n323      beh3 ~~      beh4  0.003 -0.003  -0.003   -0.002   -0.002\n325       att ~~       beh  0.006 -0.004  -0.004   -0.004   -0.004\n327        SN ~~       beh  0.114  0.018   0.018    0.018    0.018\n329       PBC ~~       beh  0.049 -0.055  -0.055   -0.055   -0.055\n330    intent ~~       beh  0.044 -0.023  -0.023   -0.023   -0.023\n331       beh  ~       att  0.001  0.002   0.002    0.002    0.002\n332       beh  ~        SN  0.125  0.022   0.017    0.017    0.017\n333    intent  ~       beh  0.044 -0.023  -0.019   -0.019   -0.019\n334       PBC  ~       beh  0.049 -0.055  -0.072   -0.072   -0.072\n338       att  ~       beh  0.006 -0.004  -0.006   -0.006   -0.006\n342        SN  ~       beh  0.114  0.018   0.024    0.024    0.024\n```\n:::\n:::\n\n\nIn this case, none of the expected parameter changes are large enough that we would consider including any additional parameters\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n\n\n<div class='question-begin'>Question 6</div><div class='question-body'>\n\n\nTest the indirect effect of attitudes, subjective norms, and perceived behavioural control on behaviour via intentions.  \n\nRemember, when you fit the model with `sem()`, use `se='bootstrap'` to get boostrapped standard errors (it may take a few minutes). When you inspect the model using `summary()`, get the 95% confidence intervals for parameters with `ci = TRUE`. \n\n\n</div><p class=\"question-end\"></p>\n\n \n\n\n<div style=\"display:none;\">\n\n\nFirst, let's name the paths in the structural equation model:\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](images/msmr-w9.png){fig-align='center' width=85%}\n:::\n:::\n\n\nTo test these indirect effects we create new a parameter for each indirect effect:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nTPB_model2 <- '\n  #measurement models for attitudes, subjective norms and perceived behavioural control\n  att =~ attitude1 + attitude2 + attitude3 + attitude4\n  SN =~ SN1 + SN2 + SN3 + SN4\n  PBC =~ PBC1 + PBC2 + PBC3 + PBC4\n  intent =~ int1 + int2 + int3 + int4\n  beh =~ beh1 + beh2 + beh3 + beh4\n\n  #regressions  \n\n  beh ~ b*intent + PBC\n  intent ~ a1*att + a2*SN + a3*PBC\n\n  ##covariances between attitudes, subjective norms and perceived behavioural control\n  att ~~ SN    \n  att ~~ PBC\n  SN ~~ PBC\n\n  ind1 := a1*b  #indirect effect of attitudes via intentions\n  ind2 := a2*b  #indirect effect of subjective norms via intentions\n  ind3 := a3*b  #indirect effect of perceived behavioural control via intentions\n'\n```\n:::\n\n\nWhen we estimate the model, we request boostrapped standard errors: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nTPB_model2.est<-sem(TPB_model2, se='bootstrap', data=TPB_data)\n```\n:::\n\n\nWhen we inspect the model, we request the 95% confidence intervals for parameters: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsummary(TPB_model2.est, fit.measures=T, standardized=T, ci=T)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nlavaan 0.6.17 ended normally after 39 iterations\n\n  Estimator                                         ML\n  Optimization method                           NLMINB\n  Number of model parameters                        48\n\n  Number of observations                           890\n\nModel Test User Model:\n                                                      \n  Test statistic                               157.059\n  Degrees of freedom                               162\n  P-value (Chi-square)                           0.595\n\nModel Test Baseline Model:\n\n  Test statistic                              5335.624\n  Degrees of freedom                               190\n  P-value                                        0.000\n\nUser Model versus Baseline Model:\n\n  Comparative Fit Index (CFI)                    1.000\n  Tucker-Lewis Index (TLI)                       1.001\n\nLoglikelihood and Information Criteria:\n\n  Loglikelihood user model (H0)             -24403.833\n  Loglikelihood unrestricted model (H1)     -24325.304\n                                                      \n  Akaike (AIC)                               48903.667\n  Bayesian (BIC)                             49133.646\n  Sample-size adjusted Bayesian (SABIC)      48981.207\n\nRoot Mean Square Error of Approximation:\n\n  RMSEA                                          0.000\n  90 Percent confidence interval - lower         0.000\n  90 Percent confidence interval - upper         0.014\n  P-value H_0: RMSEA <= 0.050                    1.000\n  P-value H_0: RMSEA >= 0.080                    0.000\n\nStandardized Root Mean Square Residual:\n\n  SRMR                                           0.023\n\nParameter Estimates:\n\n  Standard errors                            Bootstrap\n  Number of requested bootstrap draws             1000\n  Number of successful bootstrap draws            1000\n\nLatent Variables:\n                   Estimate  Std.Err  z-value  P(>|z|) ci.lower ci.upper\n  att =~                                                                \n    attitude1         1.000                               1.000    1.000\n    attitude2         1.051    0.058   17.983    0.000    0.943    1.170\n    attitude3         0.995    0.061   16.260    0.000    0.876    1.114\n    attitude4         1.029    0.058   17.758    0.000    0.921    1.147\n  SN =~                                                                 \n    SN1               1.000                               1.000    1.000\n    SN2               0.982    0.072   13.609    0.000    0.855    1.133\n    SN3               0.944    0.067   14.007    0.000    0.817    1.088\n    SN4               0.995    0.072   13.826    0.000    0.854    1.138\n  PBC =~                                                                \n    PBC1              1.000                               1.000    1.000\n    PBC2              0.938    0.042   22.556    0.000    0.860    1.023\n    PBC3              0.914    0.039   23.316    0.000    0.843    0.996\n    PBC4              0.963    0.041   23.401    0.000    0.890    1.050\n  intent =~                                                             \n    int1              1.000                               1.000    1.000\n    int2              1.164    0.084   13.781    0.000    1.003    1.353\n    int3              1.116    0.085   13.091    0.000    0.961    1.293\n    int4              1.072    0.081   13.169    0.000    0.921    1.232\n  beh =~                                                                \n    beh1              1.000                               1.000    1.000\n    beh2              0.937    0.075   12.576    0.000    0.811    1.101\n    beh3              0.925    0.073   12.720    0.000    0.783    1.082\n    beh4              0.961    0.069   14.030    0.000    0.828    1.104\n   Std.lv  Std.all\n                  \n    0.710    0.689\n    0.746    0.726\n    0.707    0.689\n    0.730    0.719\n                  \n    0.685    0.661\n    0.673    0.651\n    0.646    0.616\n    0.681    0.638\n                  \n    0.776    0.799\n    0.728    0.772\n    0.709    0.756\n    0.747    0.773\n                  \n    0.708    0.584\n    0.824    0.646\n    0.791    0.625\n    0.759    0.597\n                  \n    0.808    0.649\n    0.758    0.599\n    0.748    0.588\n    0.777    0.605\n\nRegressions:\n                   Estimate  Std.Err  z-value  P(>|z|) ci.lower ci.upper\n  beh ~                                                                 \n    intent     (b)    0.578    0.079    7.329    0.000    0.435    0.741\n    PBC               0.193    0.057    3.367    0.001    0.076    0.298\n  intent ~                                                              \n    att       (a1)    0.358    0.044    8.105    0.000    0.278    0.452\n    SN        (a2)    0.203    0.046    4.445    0.000    0.120    0.295\n    PBC       (a3)    0.447    0.041   11.007    0.000    0.368    0.530\n   Std.lv  Std.all\n                  \n    0.506    0.506\n    0.185    0.185\n                  \n    0.359    0.359\n    0.196    0.196\n    0.490    0.490\n\nCovariances:\n                   Estimate  Std.Err  z-value  P(>|z|) ci.lower ci.upper\n  att ~~                                                                \n    SN                0.156    0.024    6.460    0.000    0.109    0.205\n    PBC               0.140    0.024    5.934    0.000    0.094    0.188\n  SN ~~                                                                 \n    PBC               0.104    0.022    4.645    0.000    0.061    0.147\n   Std.lv  Std.all\n                  \n    0.320    0.320\n    0.253    0.253\n                  \n    0.196    0.196\n\nVariances:\n                   Estimate  Std.Err  z-value  P(>|z|) ci.lower ci.upper\n   .attitude1         0.556    0.035   15.673    0.000    0.483    0.623\n   .attitude2         0.498    0.033   14.927    0.000    0.429    0.561\n   .attitude3         0.551    0.033   16.673    0.000    0.482    0.613\n   .attitude4         0.498    0.029   17.348    0.000    0.442    0.553\n   .SN1               0.605    0.043   14.135    0.000    0.521    0.698\n   .SN2               0.616    0.040   15.549    0.000    0.536    0.695\n   .SN3               0.681    0.040   17.016    0.000    0.605    0.760\n   .SN4               0.676    0.046   14.718    0.000    0.588    0.767\n   .PBC1              0.341    0.023   15.110    0.000    0.299    0.387\n   .PBC2              0.359    0.023   15.355    0.000    0.314    0.407\n   .PBC3              0.377    0.021   17.854    0.000    0.335    0.420\n   .PBC4              0.376    0.023   16.319    0.000    0.329    0.421\n   .int1              0.969    0.049   19.693    0.000    0.870    1.065\n   .int2              0.949    0.060   15.894    0.000    0.836    1.075\n   .int3              0.976    0.055   17.710    0.000    0.862    1.081\n   .int4              1.042    0.054   19.260    0.000    0.935    1.147\n   .beh1              0.900    0.058   15.509    0.000    0.785    1.016\n   .beh2              1.026    0.061   16.950    0.000    0.906    1.141\n   .beh3              1.057    0.057   18.409    0.000    0.937    1.170\n   .beh4              1.045    0.060   17.296    0.000    0.924    1.173\n    att               0.504    0.048   10.465    0.000    0.415    0.606\n    SN                0.469    0.049    9.646    0.000    0.374    0.576\n    PBC               0.603    0.044   13.750    0.000    0.517    0.683\n   .intent            0.211    0.030    7.007    0.000    0.155    0.272\n   .beh               0.388    0.046    8.345    0.000    0.298    0.483\n   Std.lv  Std.all\n    0.556    0.525\n    0.498    0.472\n    0.551    0.525\n    0.498    0.483\n    0.605    0.563\n    0.616    0.577\n    0.681    0.620\n    0.676    0.593\n    0.341    0.362\n    0.359    0.404\n    0.377    0.429\n    0.376    0.403\n    0.969    0.659\n    0.949    0.583\n    0.976    0.610\n    1.042    0.644\n    0.900    0.579\n    1.026    0.641\n    1.057    0.654\n    1.045    0.634\n    1.000    1.000\n    1.000    1.000\n    1.000    1.000\n    0.421    0.421\n    0.593    0.593\n\nDefined Parameters:\n                   Estimate  Std.Err  z-value  P(>|z|) ci.lower ci.upper\n    ind1              0.207    0.033    6.293    0.000    0.149    0.275\n    ind2              0.117    0.029    4.005    0.000    0.067    0.180\n    ind3              0.258    0.038    6.736    0.000    0.192    0.340\n   Std.lv  Std.all\n    0.182    0.182\n    0.099    0.099\n    0.248    0.248\n```\n:::\n:::\n\n\nWe can see that all of the indirect effects are statistically significant at p<.05 as none of the 95% confidence intervals for the coefficients include zero.\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n\n\n<div class='question-begin'>Question 7</div><div class='question-body'>\n\n\nWrite up your analysis as if you were presenting the work in academic paper, with brief separate 'Method' and 'Results' sections\n\n\n</div><p class=\"question-end\"></p>\n\n \n\n\n<div style=\"display:none;\">\n\n\nAn example write up would be as follows:\n\n:::int\n\n**Method**\n\nWe tested a theory of planned behaviour model of physical activity by fitting a structural equation model in which attitudes, subjective norms, perceived behavioural control, intentions and behaviour were latent variables defined by four items. We first tested the measurement models for each construct by fitting a one-factor CFA model.  Latent variable scaling was by fixing the loading of the first item for each construct to 1. Models were judged to fit well if $CFI$ and $TLI$ were $>.95$ and $RMSEA$ and $SRMR$ were $<.05$. \n\nWithin the SEM, behaviour was regressed on intentions and perceived behavioural control and intentions were regressed on attitudes, subjective norms, and perceived behavioiural control. In addition, attitudes, subjective norms, and perceived behavioural control were allowed to covary. The indirect effects of attitudes, subjective norms and perceived behavioural control on behaviour were calculated as the product of the effect of the relevant predictor on the mediator (intentions) and the effect of the mediator on the outcome. The statistical significance of the indirect effects were evaluated using bootstrapped 95% confidence intervals with 1000 resamples.\n\nIn all cases models were fit using maximum likelihood estimation and model fit was judged to be good if CFI and TLI were $>.95$ and RMSEA and SRMR were $<.05$. Modification indices and expected parameter changes were inspected to identify any areas of local mis-fit but model modifications were only made if they could be justified on substantive grounds.\n\n**Results**\n\nAll measurement models fit well ($CFI$ and $TLI >.95$ and $RMSEA$ and $SRMR <.05$). The full structural equation model also fit well ($CFI = 1.00$, $TLI = 1.00$, $RMSEA <.001$, $SRMR = 0.023$). Unstandardised parameter estimates are provided in Table  1. All of the hypothesised paths  were statistically significant at $p<.05$. The significant indirect effects suggested that intentions mediate the effects of attitudes, subjective norms, and  perceived behavioural control on behaviour whilst perceived behavioural control also has a direct effect on behaviour. Results thus provide support for a theory of planned behaviour model of physical activity. \n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![Unstandardised parameter estimates for structural equation model for a theory of planned behaviour model of physical activity.](images/lab4 table.png){#fig-tabsem fig-align='center' width=80%}\n:::\n:::\n\n\n:::\n\n\n\n</div><p class=\"solution-end\"></p>\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/panelset-0.2.6/panelset.css\" rel=\"stylesheet\" />\r\n<script src=\"site_libs/panelset-0.2.6/panelset.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}