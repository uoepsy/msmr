{
  "hash": "bc6cedb6cc58f3ce9c281105d49afc9a",
  "result": {
    "markdown": "---\ntitle: \"Data wrangling for surveys & questionnaires\"\nauthor: \"hello\"\nparams: \n    SHOW_SOLS: TRUE\n    TOGGLE: TRUE\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n\nQuestionnaire data often comes to us in 'wide' format, which is often how we want it for many of the analytical methods we use with questionnaire data. However, working with data in the wide format comes with some specific challenges that generally arise because we have lots and lots of variables. \n\nBelow we will walk through some of the common ways we want to wrangle and clean questionnaire data.  \n\n\n# column names\n\nVery often, the data might come to us with huge long names that correspond to the question being asked.  \nFor instance: \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsurvdat <- read_csv(\"data/surveywrangle.csv\") |> mutate(ppt = 1:n())\nsurvdat <- survdat[,c(60,3:52)]\nnames(survdat) <- gsub(\"Describe yourself as you generally are now, not as you wish to be in the future. Describe yourself as you honestly see yourself, in relation to other people you know of the same age and sex as you are. Remember that responses are anonymised. Please indicate the accuracy for each statement in how it describes you.  \",\"\",names(survdat))\nhead(survdat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 51\n    ppt [I am the life of the pa…¹ [I feel little conce…² [I am always prepare…³\n  <int> <chr>                      <chr>                  <chr>                 \n1     1 Moderately Accurate        Very Inaccurate        Moderately Accurate   \n2     2 Neither Accurate nor Inac… Moderately Inaccurate  Moderately Accurate   \n3     3 Very Inaccurate            Very Inaccurate        Neither Accurate nor …\n4     4 Very Inaccurate            Moderately Inaccurate  Moderately Accurate   \n5     5 Very Inaccurate            Very Inaccurate        Neither Accurate nor …\n6     6 Moderately Accurate        Very Inaccurate        Moderately Inaccurate \n# ℹ abbreviated names: ¹​`[I am the life of the party.]`,\n#   ²​`[I feel little concern for others.]`, ³​`[I am always prepared.]`\n# ℹ 47 more variables: `[I get stressed out easily.]` <chr>,\n#   `[I have a rich vocabulary.]` <chr>, `[I don't talk a lot.]` <chr>,\n#   `[I am interested in people.]` <chr>,\n#   `[I leave my belongings around.]` <chr>,\n#   `[I am relaxed most of the time.]` <chr>, …\n```\n:::\n:::\n\n\nOften, we want our variables to have some easier names to work with, e.g. \"q1\", \"q2\" etc.  \n\nBecause it's often important to keep track of what each question actually asks, it can be useful to create a little dictionary to map our new variable names to the current names.  \n\nIn our data, we have a variable called `ppt`, and then 50 variables corresponding to 50 different questions.  \nWhat I plan to do is rename them to `ppt`, `q1`, `q2`, ..., `q50`.  \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndatadict <- \n  tibble(\n    # these are my proposed new names\n    variable = c(\"ppt\", paste0(\"q\", 1:50)),\n    # current names\n    question = names(survdat)\n  )\nhead(datadict)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 2\n  variable question                           \n  <chr>    <chr>                              \n1 ppt      ppt                                \n2 q1       [I am the life of the party.]      \n3 q2       [I feel little concern for others.]\n4 q3       [I am always prepared.]            \n5 q4       [I get stressed out easily.]       \n6 q5       [I have a rich vocabulary.]        \n```\n:::\n:::\n\n\nIf we want to, we can write this to a .csv file so that we can keep it somewhere useful.\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nwrite_csv(datadict, file = \"survey_dictionary.csv\")\n```\n:::\n\n\nNow we have created our record, we can actually change the names of the variables:  \n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nnames(survdat) <- c(\"ppt\", paste0(\"q\", 1:50))\nhead(survdat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 51\n    ppt q1     q2    q3    q4    q5    q6    q7    q8    q9    q10   q11   q12  \n  <int> <chr>  <chr> <chr> <chr> <chr> <chr> <chr> <chr> <chr> <chr> <chr> <chr>\n1     1 Moder… Very… Mode… Mode… Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode…\n2     2 Neith… Mode… Mode… Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode… Very…\n3     3 Very … Very… Neit… Mode… Mode… Mode… Mode… Neit… Mode… Very… Mode… Very…\n4     4 Very … Mode… Mode… Mode… Very… Mode… Mode… Mode… Mode… Mode… Mode… Very…\n5     5 Very … Very… Neit… Mode… Mode… Very… Neit… Neit… Mode… Mode… Neit… Mode…\n6     6 Moder… Very… Mode… Very… Very… Neit… Mode… Very… Neit… Mode… Mode… Very…\n# ℹ 38 more variables: q13 <chr>, q14 <chr>, q15 <chr>, q16 <chr>, q17 <chr>,\n#   q18 <chr>, q19 <chr>, q20 <chr>, q21 <chr>, q22 <chr>, q23 <chr>,\n#   q24 <chr>, q25 <chr>, q26 <chr>, q27 <chr>, q28 <chr>, q29 <chr>,\n#   q30 <chr>, q31 <chr>, q32 <chr>, q33 <chr>, q34 <chr>, q35 <chr>,\n#   q36 <chr>, q37 <chr>, q38 <chr>, q39 <chr>, q40 <chr>, q41 <chr>,\n#   q42 <chr>, q43 <chr>, q44 <chr>, q45 <chr>, q46 <chr>, q47 <chr>,\n#   q48 <chr>, q49 <chr>, q50 <chr>\n```\n:::\n:::\n\n\n# replacing values and recoding\n\nFirst things first, all of the questions are scored on a 5 point likert^[Technically this is pronounced \"LICK-URT\" and not \"LIE-KURT\". It's named after [Dr Rensis Likert](https://en.wikipedia.org/wiki/Rensis_Likert){target=\"_blank\"}, and that's how he pronounced his name!] scale. \n\nThe data has come out of whatever questionnaire software we used and it's showing the chosen response for each question in words, e.g. \"Moderately Accurate. But we are going to to treat them as numbers. \nYou might be shouting here that it looks like we're about to turn a set of ordered categories into some interval scale, and that \n\nsome statisticians might maintain that ordinal data is simply __not__ continuous, so we should never treat it as such. In psychology, much research using SEM centers around questionnaire data, which lends itself to *likert* data (for instance, \"strongly agree\",\"agree\",\"neither agree nor disagree\",\"disagree\",\"strongly disagree\"). An often used rule of thumb, is that likert data with $\\geq 5$ levels can be treated as if they are continuous without unduly influencing results (see [Johnson, D.R., & Creech, J.C. (1983). Ordinal measures in multiple indicator models: A simulation study of categorization error](https://discovered.ed.ac.uk/permalink/f/1s15qcp/TN_cdi_crossref_primary_10_2307_2095231)).  \n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div id=\"woqrjranwd\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#woqrjranwd table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#woqrjranwd thead, #woqrjranwd tbody, #woqrjranwd tfoot, #woqrjranwd tr, #woqrjranwd td, #woqrjranwd th {\n  border-style: none;\n}\n\n#woqrjranwd p {\n  margin: 0;\n  padding: 0;\n}\n\n#woqrjranwd .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#woqrjranwd .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#woqrjranwd .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#woqrjranwd .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#woqrjranwd .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#woqrjranwd .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#woqrjranwd .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#woqrjranwd .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#woqrjranwd .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#woqrjranwd .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#woqrjranwd .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#woqrjranwd .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#woqrjranwd .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#woqrjranwd .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#woqrjranwd .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#woqrjranwd .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#woqrjranwd .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#woqrjranwd .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#woqrjranwd .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#woqrjranwd .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#woqrjranwd .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#woqrjranwd .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#woqrjranwd .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#woqrjranwd .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#woqrjranwd .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#woqrjranwd .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#woqrjranwd .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#woqrjranwd .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#woqrjranwd .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#woqrjranwd .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#woqrjranwd .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#woqrjranwd .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#woqrjranwd .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#woqrjranwd .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#woqrjranwd .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#woqrjranwd .gt_left {\n  text-align: left;\n}\n\n#woqrjranwd .gt_center {\n  text-align: center;\n}\n\n#woqrjranwd .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#woqrjranwd .gt_font_normal {\n  font-weight: normal;\n}\n\n#woqrjranwd .gt_font_bold {\n  font-weight: bold;\n}\n\n#woqrjranwd .gt_font_italic {\n  font-style: italic;\n}\n\n#woqrjranwd .gt_super {\n  font-size: 65%;\n}\n\n#woqrjranwd .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#woqrjranwd .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#woqrjranwd .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#woqrjranwd .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#woqrjranwd .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#woqrjranwd .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#woqrjranwd .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"response\">response</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"score\">score</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"response\" class=\"gt_row gt_left\">Very Inaccurate</td>\n<td headers=\"score\" class=\"gt_row gt_right\">1</td></tr>\n    <tr><td headers=\"response\" class=\"gt_row gt_left\">Moderately Inaccurate</td>\n<td headers=\"score\" class=\"gt_row gt_right\">2</td></tr>\n    <tr><td headers=\"response\" class=\"gt_row gt_left\">Neither Accurate nor Inaccurate</td>\n<td headers=\"score\" class=\"gt_row gt_right\">3</td></tr>\n    <tr><td headers=\"response\" class=\"gt_row gt_left\">Moderately Accurate</td>\n<td headers=\"score\" class=\"gt_row gt_right\">4</td></tr>\n    <tr><td headers=\"response\" class=\"gt_row gt_left\">Very Accurate</td>\n<td headers=\"score\" class=\"gt_row gt_right\">5</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nlet's see how we can do it for one question first: \nthe `recode()` function can be very useful, but there are lots of other approaches\n\n\n\n::::panelset\n:::panel\n#### recode\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsurvdat %>% \n  mutate(\n    q3 = recode(q3, \n                \"Very Inaccurate\" = 1,\n                \"Moderately Inaccurate\" = 2,\n                \"Neither Accurate nor Inaccurate\" = 3,\n                \"Moderately Accurate\" = 4,\n                \"Very Accurate\" = 5)\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 76 × 51\n     ppt q1    q2       q3 q4    q5    q6    q7    q8    q9    q10   q11   q12  \n   <int> <chr> <chr> <dbl> <chr> <chr> <chr> <chr> <chr> <chr> <chr> <chr> <chr>\n 1     1 Mode… Very…     4 Mode… Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode…\n 2     2 Neit… Mode…     4 Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode… Very…\n 3     3 Very… Very…     3 Mode… Mode… Mode… Mode… Neit… Mode… Very… Mode… Very…\n 4     4 Very… Mode…     4 Mode… Very… Mode… Mode… Mode… Mode… Mode… Mode… Very…\n 5     5 Very… Very…     3 Mode… Mode… Very… Neit… Neit… Mode… Mode… Neit… Mode…\n 6     6 Mode… Very…     2 Very… Very… Neit… Mode… Very… Neit… Mode… Mode… Very…\n 7     7 Mode… Very…     4 Very… Mode… Mode… Mode… Mode… Neit… Mode… Neit… Very…\n 8     8 Mode… Neit…     5 Very… Neit… Neit… Mode… Very… Very… Neit… Mode… Very…\n 9     9 Neit… Mode…     5 Very… Very… Neit… Very… Neit… Neit… Very… Mode… Very…\n10    10 Neit… Very…     4 Mode… Mode… Neit… Mode… Mode… Mode… Mode… Neit… Very…\n# ℹ 66 more rows\n# ℹ 38 more variables: q13 <chr>, q14 <chr>, q15 <chr>, q16 <chr>, q17 <chr>,\n#   q18 <chr>, q19 <chr>, q20 <chr>, q21 <chr>, q22 <chr>, q23 <chr>,\n#   q24 <chr>, q25 <chr>, q26 <chr>, q27 <chr>, q28 <chr>, q29 <chr>,\n#   q30 <chr>, q31 <chr>, q32 <chr>, q33 <chr>, q34 <chr>, q35 <chr>,\n#   q36 <chr>, q37 <chr>, q38 <chr>, q39 <chr>, q40 <chr>, q41 <chr>,\n#   q42 <chr>, q43 <chr>, q44 <chr>, q45 <chr>, q46 <chr>, q47 <chr>, …\n```\n:::\n:::\n\n:::\n:::panel\n#### ifelse\nmuch more cumbersome as it requires multiple nested ifelse statements:\nalso, to ensure that anyhing that isn't one of the 5 valid response options gets to be an NA, we have the final \"else\" specifying that if it's none of the prespecified options, make it an NA\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsurvdat %>% \n  mutate(\n    q3 = ifelse(q3 == \"Very Inaccurate\", 1,\n                ifelse(q3 == \"Moderately Inaccurate\", 2, \n                       ifelse( q3 == \"Neither Accurate nor Inaccurate\", 3, \n                               ifelse(q3 == \"Moderately Accurate\", 4, \n                                      ifelse(q3 == \"Very Accurate\", 5, NA)))))\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 76 × 51\n     ppt q1    q2       q3 q4    q5    q6    q7    q8    q9    q10   q11   q12  \n   <int> <chr> <chr> <dbl> <chr> <chr> <chr> <chr> <chr> <chr> <chr> <chr> <chr>\n 1     1 Mode… Very…     4 Mode… Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode…\n 2     2 Neit… Mode…     4 Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode… Very…\n 3     3 Very… Very…     3 Mode… Mode… Mode… Mode… Neit… Mode… Very… Mode… Very…\n 4     4 Very… Mode…     4 Mode… Very… Mode… Mode… Mode… Mode… Mode… Mode… Very…\n 5     5 Very… Very…     3 Mode… Mode… Very… Neit… Neit… Mode… Mode… Neit… Mode…\n 6     6 Mode… Very…     2 Very… Very… Neit… Mode… Very… Neit… Mode… Mode… Very…\n 7     7 Mode… Very…     4 Very… Mode… Mode… Mode… Mode… Neit… Mode… Neit… Very…\n 8     8 Mode… Neit…     5 Very… Neit… Neit… Mode… Very… Very… Neit… Mode… Very…\n 9     9 Neit… Mode…     5 Very… Very… Neit… Very… Neit… Neit… Very… Mode… Very…\n10    10 Neit… Very…     4 Mode… Mode… Neit… Mode… Mode… Mode… Mode… Neit… Very…\n# ℹ 66 more rows\n# ℹ 38 more variables: q13 <chr>, q14 <chr>, q15 <chr>, q16 <chr>, q17 <chr>,\n#   q18 <chr>, q19 <chr>, q20 <chr>, q21 <chr>, q22 <chr>, q23 <chr>,\n#   q24 <chr>, q25 <chr>, q26 <chr>, q27 <chr>, q28 <chr>, q29 <chr>,\n#   q30 <chr>, q31 <chr>, q32 <chr>, q33 <chr>, q34 <chr>, q35 <chr>,\n#   q36 <chr>, q37 <chr>, q38 <chr>, q39 <chr>, q40 <chr>, q41 <chr>,\n#   q42 <chr>, q43 <chr>, q44 <chr>, q45 <chr>, q46 <chr>, q47 <chr>, …\n```\n:::\n:::\n\n:::\n\n:::panel\n#### case_when\n\nthe final entry here `TRUE ~ NA_real_` is a bit like saying \"and if it is anything else, make it an NA\". \n- note we need to specify the _type_ of NA - i.e. because we are making all of the entries numbers, it needs to be NA_real_. If were were making them characters, it would need to be NA_character\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nsurvdat %>% \n  mutate(\n    q3 = case_when(\n      q3 == \"Very Inaccurate\" ~ 1,\n      q3 == \"Moderately Inaccurate\" ~ 2,\n      q3 == \"Neither Accurate nor Inaccurate\" ~ 3,\n      q3 == \"Moderately Accurate\" ~ 4,\n      q3 == \"Very Accurate\" ~ 5,\n      TRUE ~ NA_real_\n    )\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 76 × 51\n     ppt q1    q2       q3 q4    q5    q6    q7    q8    q9    q10   q11   q12  \n   <int> <chr> <chr> <dbl> <chr> <chr> <chr> <chr> <chr> <chr> <chr> <chr> <chr>\n 1     1 Mode… Very…     4 Mode… Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode…\n 2     2 Neit… Mode…     4 Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode… Very…\n 3     3 Very… Very…     3 Mode… Mode… Mode… Mode… Neit… Mode… Very… Mode… Very…\n 4     4 Very… Mode…     4 Mode… Very… Mode… Mode… Mode… Mode… Mode… Mode… Very…\n 5     5 Very… Very…     3 Mode… Mode… Very… Neit… Neit… Mode… Mode… Neit… Mode…\n 6     6 Mode… Very…     2 Very… Very… Neit… Mode… Very… Neit… Mode… Mode… Very…\n 7     7 Mode… Very…     4 Very… Mode… Mode… Mode… Mode… Neit… Mode… Neit… Very…\n 8     8 Mode… Neit…     5 Very… Neit… Neit… Mode… Very… Very… Neit… Mode… Very…\n 9     9 Neit… Mode…     5 Very… Very… Neit… Very… Neit… Neit… Very… Mode… Very…\n10    10 Neit… Very…     4 Mode… Mode… Neit… Mode… Mode… Mode… Mode… Neit… Very…\n# ℹ 66 more rows\n# ℹ 38 more variables: q13 <chr>, q14 <chr>, q15 <chr>, q16 <chr>, q17 <chr>,\n#   q18 <chr>, q19 <chr>, q20 <chr>, q21 <chr>, q22 <chr>, q23 <chr>,\n#   q24 <chr>, q25 <chr>, q26 <chr>, q27 <chr>, q28 <chr>, q29 <chr>,\n#   q30 <chr>, q31 <chr>, q32 <chr>, q33 <chr>, q34 <chr>, q35 <chr>,\n#   q36 <chr>, q37 <chr>, q38 <chr>, q39 <chr>, q40 <chr>, q41 <chr>,\n#   q42 <chr>, q43 <chr>, q44 <chr>, q45 <chr>, q46 <chr>, q47 <chr>, …\n```\n:::\n:::\n\n:::\n\n\n::::\n\n## reverse coding\n\ntidyverse\nbase\n\n\n\n# applying the same operation across variables\n\ntidyverse\nmutate(across())\nbase\napply(df,2,fun)\n\ncheck!\n\n\n\n\n# rowwise metrics\n\ncounting NAs\n\n\n# row scoring\n\nrowsums rowmeans\nNAs\n\nlink reliability\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/panelset-0.2.6/panelset.css\" rel=\"stylesheet\" />\r\n<script src=\"site_libs/panelset-0.2.6/panelset.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}