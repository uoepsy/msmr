<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.340">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="hello">

<title>MSMR - Data wrangling for surveys &amp; questionnaires</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script>
function toggle_visibility(id1, id2) {
var e = document.getElementById(id1);
var f = document.getElementById(id2);
e.style.display = ((e.style.display!='none') ? 'none' : 'block');
if(f.classList.contains('jk-circle-right')) {
    f.classList.add('jk-circle-down')
    f.classList.remove('jk-circle-right')
} else {
    f.classList.add('jk-circle-right')
    f.classList.remove('jk-circle-down')
}
}
</script>

<!---<script src="https://kit.fontawesome.com/120b08a6f5.js" crossorigin="anonymous"></script>-->
<link href="site_libs/panelset-0.2.6/panelset.css" rel="stylesheet">
<script src="site_libs/panelset-0.2.6/panelset.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      MSMR
      </li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">MSMR</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Week 1</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01a_clustered.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1A: Clustered Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01b_lmm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1B: Linear Mixed Models/Multi-level Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1 Exercises: Intro to MLM</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Week 2</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02a_inference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2A: Inference for MLM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02b_loglong.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">2B: Logistic MLM | Longitudinal MLM</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2 Exercises: Logistic and Longitudinal</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Week 3</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03a_poly.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3A: Polynomial Growth</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3 Exercises: Non-Linear Change</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Week 4</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04a_ranef.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4A: Random Effect Structures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4 Exercises: Nested and Crossed</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Week 5</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05a_assump.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5A: Model Assumptions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05b_writing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5B: Writing</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 5 Exercises: Assumptions, Diagnostics, Writing up</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Additional Docs</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_lm_assumpt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">LM Troubleshooting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lvp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Likelihood vs Probability</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#column-names" id="toc-column-names" class="nav-link active" data-scroll-target="#column-names">column names</a></li>
  <li><a href="#replacing-values-and-recoding" id="toc-replacing-values-and-recoding" class="nav-link" data-scroll-target="#replacing-values-and-recoding">replacing values and recoding</a>
  <ul class="collapse">
  <li><a href="#reverse-coding" id="toc-reverse-coding" class="nav-link" data-scroll-target="#reverse-coding">reverse coding</a></li>
  </ul></li>
  <li><a href="#applying-the-same-operation-across-variables" id="toc-applying-the-same-operation-across-variables" class="nav-link" data-scroll-target="#applying-the-same-operation-across-variables">applying the same operation across variables</a></li>
  <li><a href="#rowwise-metrics" id="toc-rowwise-metrics" class="nav-link" data-scroll-target="#rowwise-metrics">rowwise metrics</a></li>
  <li><a href="#row-scoring" id="toc-row-scoring" class="nav-link" data-scroll-target="#row-scoring">row scoring</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data wrangling for surveys &amp; questionnaires</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>hello </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<p>Questionnaire data often comes to us in ‘wide’ format, which is often how we want it for many of the analytical methods we use with questionnaire data. However, working with data in the wide format comes with some specific challenges that generally arise because we have lots and lots of variables.</p>
<p>Below we will walk through some of the common ways we want to wrangle and clean questionnaire data.</p>
<section id="column-names" class="level1">
<h1>column names</h1>
<p>Very often, the data might come to us with huge long names that correspond to the question being asked.<br>
For instance:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>survdat <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/surveywrangle.csv"</span>) <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">ppt =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>())</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>survdat <span class="ot">&lt;-</span> survdat[,<span class="fu">c</span>(<span class="dv">60</span>,<span class="dv">3</span><span class="sc">:</span><span class="dv">52</span>)]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(survdat) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Describe yourself as you generally are now, not as you wish to be in the future. Describe yourself as you honestly see yourself, in relation to other people you know of the same age and sex as you are. Remember that responses are anonymised. Please indicate the accuracy for each statement in how it describes you.  "</span>,<span class="st">""</span>,<span class="fu">names</span>(survdat))</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(survdat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 51
    ppt [I am the life of the pa…¹ [I feel little conce…² [I am always prepare…³
  &lt;int&gt; &lt;chr&gt;                      &lt;chr&gt;                  &lt;chr&gt;                 
1     1 Moderately Accurate        Very Inaccurate        Moderately Accurate   
2     2 Neither Accurate nor Inac… Moderately Inaccurate  Moderately Accurate   
3     3 Very Inaccurate            Very Inaccurate        Neither Accurate nor …
4     4 Very Inaccurate            Moderately Inaccurate  Moderately Accurate   
5     5 Very Inaccurate            Very Inaccurate        Neither Accurate nor …
6     6 Moderately Accurate        Very Inaccurate        Moderately Inaccurate 
# ℹ abbreviated names: ¹​`[I am the life of the party.]`,
#   ²​`[I feel little concern for others.]`, ³​`[I am always prepared.]`
# ℹ 47 more variables: `[I get stressed out easily.]` &lt;chr&gt;,
#   `[I have a rich vocabulary.]` &lt;chr&gt;, `[I don't talk a lot.]` &lt;chr&gt;,
#   `[I am interested in people.]` &lt;chr&gt;,
#   `[I leave my belongings around.]` &lt;chr&gt;,
#   `[I am relaxed most of the time.]` &lt;chr&gt;, …</code></pre>
</div>
</div>
<p>Often, we want our variables to have some easier names to work with, e.g.&nbsp;“q1”, “q2” etc.</p>
<p>Because it’s often important to keep track of what each question actually asks, it can be useful to create a little dictionary to map our new variable names to the current names.</p>
<p>In our data, we have a variable called <code>ppt</code>, and then 50 variables corresponding to 50 different questions.<br>
What I plan to do is rename them to <code>ppt</code>, <code>q1</code>, <code>q2</code>, …, <code>q50</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>datadict <span class="ot">&lt;-</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># these are my proposed new names</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">variable =</span> <span class="fu">c</span>(<span class="st">"ppt"</span>, <span class="fu">paste0</span>(<span class="st">"q"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>)),</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># current names</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">question =</span> <span class="fu">names</span>(survdat)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datadict)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  variable question                           
  &lt;chr&gt;    &lt;chr&gt;                              
1 ppt      ppt                                
2 q1       [I am the life of the party.]      
3 q2       [I feel little concern for others.]
4 q3       [I am always prepared.]            
5 q4       [I get stressed out easily.]       
6 q5       [I have a rich vocabulary.]        </code></pre>
</div>
</div>
<p>If we want to, we can write this to a .csv file so that we can keep it somewhere useful.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(datadict, <span class="at">file =</span> <span class="st">"survey_dictionary.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we have created our record, we can actually change the names of the variables:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(survdat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ppt"</span>, <span class="fu">paste0</span>(<span class="st">"q"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(survdat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 51
    ppt q1     q2    q3    q4    q5    q6    q7    q8    q9    q10   q11   q12  
  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
1     1 Moder… Very… Mode… Mode… Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode…
2     2 Neith… Mode… Mode… Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode… Very…
3     3 Very … Very… Neit… Mode… Mode… Mode… Mode… Neit… Mode… Very… Mode… Very…
4     4 Very … Mode… Mode… Mode… Very… Mode… Mode… Mode… Mode… Mode… Mode… Very…
5     5 Very … Very… Neit… Mode… Mode… Very… Neit… Neit… Mode… Mode… Neit… Mode…
6     6 Moder… Very… Mode… Very… Very… Neit… Mode… Very… Neit… Mode… Mode… Very…
# ℹ 38 more variables: q13 &lt;chr&gt;, q14 &lt;chr&gt;, q15 &lt;chr&gt;, q16 &lt;chr&gt;, q17 &lt;chr&gt;,
#   q18 &lt;chr&gt;, q19 &lt;chr&gt;, q20 &lt;chr&gt;, q21 &lt;chr&gt;, q22 &lt;chr&gt;, q23 &lt;chr&gt;,
#   q24 &lt;chr&gt;, q25 &lt;chr&gt;, q26 &lt;chr&gt;, q27 &lt;chr&gt;, q28 &lt;chr&gt;, q29 &lt;chr&gt;,
#   q30 &lt;chr&gt;, q31 &lt;chr&gt;, q32 &lt;chr&gt;, q33 &lt;chr&gt;, q34 &lt;chr&gt;, q35 &lt;chr&gt;,
#   q36 &lt;chr&gt;, q37 &lt;chr&gt;, q38 &lt;chr&gt;, q39 &lt;chr&gt;, q40 &lt;chr&gt;, q41 &lt;chr&gt;,
#   q42 &lt;chr&gt;, q43 &lt;chr&gt;, q44 &lt;chr&gt;, q45 &lt;chr&gt;, q46 &lt;chr&gt;, q47 &lt;chr&gt;,
#   q48 &lt;chr&gt;, q49 &lt;chr&gt;, q50 &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="replacing-values-and-recoding" class="level1">
<h1>replacing values and recoding</h1>
<p>First things first, all of the questions are scored on a 5 point likert<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> scale.</p>
<p>The data has come out of whatever questionnaire software we used and it’s showing the chosen response for each question in words, e.g.&nbsp;“Moderately Accurate. But we are going to to treat them as numbers. You might be shouting here that it looks like we’re about to turn a set of ordered categories into some interval scale, and that</p>
<p>some statisticians might maintain that ordinal data is simply <strong>not</strong> continuous, so we should never treat it as such. In psychology, much research using SEM centers around questionnaire data, which lends itself to <em>likert</em> data (for instance, “strongly agree”,“agree”,“neither agree nor disagree”,“disagree”,“strongly disagree”). An often used rule of thumb, is that likert data with <span class="math inline">\(\geq 5\)</span> levels can be treated as if they are continuous without unduly influencing results (see <a href="https://discovered.ed.ac.uk/permalink/f/1s15qcp/TN_cdi_crossref_primary_10_2307_2095231">Johnson, D.R., &amp; Creech, J.C. (1983). Ordinal measures in multiple indicator models: A simulation study of categorization error</a>).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">

<div id="woqrjranwd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#woqrjranwd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#woqrjranwd thead, #woqrjranwd tbody, #woqrjranwd tfoot, #woqrjranwd tr, #woqrjranwd td, #woqrjranwd th {
  border-style: none;
}

#woqrjranwd p {
  margin: 0;
  padding: 0;
}

#woqrjranwd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#woqrjranwd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#woqrjranwd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#woqrjranwd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#woqrjranwd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#woqrjranwd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#woqrjranwd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#woqrjranwd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#woqrjranwd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#woqrjranwd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#woqrjranwd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#woqrjranwd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#woqrjranwd .gt_spanner_row {
  border-bottom-style: hidden;
}

#woqrjranwd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#woqrjranwd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#woqrjranwd .gt_from_md > :first-child {
  margin-top: 0;
}

#woqrjranwd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#woqrjranwd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#woqrjranwd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#woqrjranwd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#woqrjranwd .gt_row_group_first td {
  border-top-width: 2px;
}

#woqrjranwd .gt_row_group_first th {
  border-top-width: 2px;
}

#woqrjranwd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#woqrjranwd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#woqrjranwd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#woqrjranwd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#woqrjranwd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#woqrjranwd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#woqrjranwd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#woqrjranwd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#woqrjranwd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#woqrjranwd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#woqrjranwd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#woqrjranwd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#woqrjranwd .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#woqrjranwd .gt_left {
  text-align: left;
}

#woqrjranwd .gt_center {
  text-align: center;
}

#woqrjranwd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#woqrjranwd .gt_font_normal {
  font-weight: normal;
}

#woqrjranwd .gt_font_bold {
  font-weight: bold;
}

#woqrjranwd .gt_font_italic {
  font-style: italic;
}

#woqrjranwd .gt_super {
  font-size: 65%;
}

#woqrjranwd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#woqrjranwd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#woqrjranwd .gt_indent_1 {
  text-indent: 5px;
}

#woqrjranwd .gt_indent_2 {
  text-indent: 10px;
}

#woqrjranwd .gt_indent_3 {
  text-indent: 15px;
}

#woqrjranwd .gt_indent_4 {
  text-indent: 20px;
}

#woqrjranwd .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="response">response</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="score">score</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="response" class="gt_row gt_left">Very Inaccurate</td>
<td headers="score" class="gt_row gt_right">1</td></tr>
    <tr><td headers="response" class="gt_row gt_left">Moderately Inaccurate</td>
<td headers="score" class="gt_row gt_right">2</td></tr>
    <tr><td headers="response" class="gt_row gt_left">Neither Accurate nor Inaccurate</td>
<td headers="score" class="gt_row gt_right">3</td></tr>
    <tr><td headers="response" class="gt_row gt_left">Moderately Accurate</td>
<td headers="score" class="gt_row gt_right">4</td></tr>
    <tr><td headers="response" class="gt_row gt_left">Very Accurate</td>
<td headers="score" class="gt_row gt_right">5</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>let’s see how we can do it for one question first: the <code>recode()</code> function can be very useful, but there are lots of other approaches</p>
<div class="panelset">
<section id="recode" class="level4 panel">
<h4 class="anchored" data-anchor-id="recode">recode</h4>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>survdat <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">recode</span>(q3, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Very Inaccurate"</span> <span class="ot">=</span> <span class="dv">1</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Moderately Inaccurate"</span> <span class="ot">=</span> <span class="dv">2</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Neither Accurate nor Inaccurate"</span> <span class="ot">=</span> <span class="dv">3</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Moderately Accurate"</span> <span class="ot">=</span> <span class="dv">4</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Very Accurate"</span> <span class="ot">=</span> <span class="dv">5</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 76 × 51
     ppt q1    q2       q3 q4    q5    q6    q7    q8    q9    q10   q11   q12  
   &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
 1     1 Mode… Very…     4 Mode… Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode…
 2     2 Neit… Mode…     4 Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode… Very…
 3     3 Very… Very…     3 Mode… Mode… Mode… Mode… Neit… Mode… Very… Mode… Very…
 4     4 Very… Mode…     4 Mode… Very… Mode… Mode… Mode… Mode… Mode… Mode… Very…
 5     5 Very… Very…     3 Mode… Mode… Very… Neit… Neit… Mode… Mode… Neit… Mode…
 6     6 Mode… Very…     2 Very… Very… Neit… Mode… Very… Neit… Mode… Mode… Very…
 7     7 Mode… Very…     4 Very… Mode… Mode… Mode… Mode… Neit… Mode… Neit… Very…
 8     8 Mode… Neit…     5 Very… Neit… Neit… Mode… Very… Very… Neit… Mode… Very…
 9     9 Neit… Mode…     5 Very… Very… Neit… Very… Neit… Neit… Very… Mode… Very…
10    10 Neit… Very…     4 Mode… Mode… Neit… Mode… Mode… Mode… Mode… Neit… Very…
# ℹ 66 more rows
# ℹ 38 more variables: q13 &lt;chr&gt;, q14 &lt;chr&gt;, q15 &lt;chr&gt;, q16 &lt;chr&gt;, q17 &lt;chr&gt;,
#   q18 &lt;chr&gt;, q19 &lt;chr&gt;, q20 &lt;chr&gt;, q21 &lt;chr&gt;, q22 &lt;chr&gt;, q23 &lt;chr&gt;,
#   q24 &lt;chr&gt;, q25 &lt;chr&gt;, q26 &lt;chr&gt;, q27 &lt;chr&gt;, q28 &lt;chr&gt;, q29 &lt;chr&gt;,
#   q30 &lt;chr&gt;, q31 &lt;chr&gt;, q32 &lt;chr&gt;, q33 &lt;chr&gt;, q34 &lt;chr&gt;, q35 &lt;chr&gt;,
#   q36 &lt;chr&gt;, q37 &lt;chr&gt;, q38 &lt;chr&gt;, q39 &lt;chr&gt;, q40 &lt;chr&gt;, q41 &lt;chr&gt;,
#   q42 &lt;chr&gt;, q43 &lt;chr&gt;, q44 &lt;chr&gt;, q45 &lt;chr&gt;, q46 &lt;chr&gt;, q47 &lt;chr&gt;, …</code></pre>
</div>
</div>
</section>
<section id="ifelse" class="level4 panel">
<h4 class="anchored" data-anchor-id="ifelse">ifelse</h4>
<p>much more cumbersome as it requires multiple nested ifelse statements: also, to ensure that anyhing that isn’t one of the 5 valid response options gets to be an NA, we have the final “else” specifying that if it’s none of the prespecified options, make it an NA</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>survdat <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">ifelse</span>(q3 <span class="sc">==</span> <span class="st">"Very Inaccurate"</span>, <span class="dv">1</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                <span class="fu">ifelse</span>(q3 <span class="sc">==</span> <span class="st">"Moderately Inaccurate"</span>, <span class="dv">2</span>, </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                       <span class="fu">ifelse</span>( q3 <span class="sc">==</span> <span class="st">"Neither Accurate nor Inaccurate"</span>, <span class="dv">3</span>, </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                               <span class="fu">ifelse</span>(q3 <span class="sc">==</span> <span class="st">"Moderately Accurate"</span>, <span class="dv">4</span>, </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                                      <span class="fu">ifelse</span>(q3 <span class="sc">==</span> <span class="st">"Very Accurate"</span>, <span class="dv">5</span>, <span class="cn">NA</span>)))))</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 76 × 51
     ppt q1    q2       q3 q4    q5    q6    q7    q8    q9    q10   q11   q12  
   &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
 1     1 Mode… Very…     4 Mode… Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode…
 2     2 Neit… Mode…     4 Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode… Very…
 3     3 Very… Very…     3 Mode… Mode… Mode… Mode… Neit… Mode… Very… Mode… Very…
 4     4 Very… Mode…     4 Mode… Very… Mode… Mode… Mode… Mode… Mode… Mode… Very…
 5     5 Very… Very…     3 Mode… Mode… Very… Neit… Neit… Mode… Mode… Neit… Mode…
 6     6 Mode… Very…     2 Very… Very… Neit… Mode… Very… Neit… Mode… Mode… Very…
 7     7 Mode… Very…     4 Very… Mode… Mode… Mode… Mode… Neit… Mode… Neit… Very…
 8     8 Mode… Neit…     5 Very… Neit… Neit… Mode… Very… Very… Neit… Mode… Very…
 9     9 Neit… Mode…     5 Very… Very… Neit… Very… Neit… Neit… Very… Mode… Very…
10    10 Neit… Very…     4 Mode… Mode… Neit… Mode… Mode… Mode… Mode… Neit… Very…
# ℹ 66 more rows
# ℹ 38 more variables: q13 &lt;chr&gt;, q14 &lt;chr&gt;, q15 &lt;chr&gt;, q16 &lt;chr&gt;, q17 &lt;chr&gt;,
#   q18 &lt;chr&gt;, q19 &lt;chr&gt;, q20 &lt;chr&gt;, q21 &lt;chr&gt;, q22 &lt;chr&gt;, q23 &lt;chr&gt;,
#   q24 &lt;chr&gt;, q25 &lt;chr&gt;, q26 &lt;chr&gt;, q27 &lt;chr&gt;, q28 &lt;chr&gt;, q29 &lt;chr&gt;,
#   q30 &lt;chr&gt;, q31 &lt;chr&gt;, q32 &lt;chr&gt;, q33 &lt;chr&gt;, q34 &lt;chr&gt;, q35 &lt;chr&gt;,
#   q36 &lt;chr&gt;, q37 &lt;chr&gt;, q38 &lt;chr&gt;, q39 &lt;chr&gt;, q40 &lt;chr&gt;, q41 &lt;chr&gt;,
#   q42 &lt;chr&gt;, q43 &lt;chr&gt;, q44 &lt;chr&gt;, q45 &lt;chr&gt;, q46 &lt;chr&gt;, q47 &lt;chr&gt;, …</code></pre>
</div>
</div>
</section>
<section id="case_when" class="level4 panel">
<h4 class="anchored" data-anchor-id="case_when">case_when</h4>
<p>the final entry here <code>TRUE ~ NA_real_</code> is a bit like saying “and if it is anything else, make it an NA”. - note we need to specify the <em>type</em> of NA - i.e.&nbsp;because we are making all of the entries numbers, it needs to be NA_real_. If were were making them characters, it would need to be NA_character</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>survdat <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">q3 =</span> <span class="fu">case_when</span>(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>      q3 <span class="sc">==</span> <span class="st">"Very Inaccurate"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>      q3 <span class="sc">==</span> <span class="st">"Moderately Inaccurate"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>      q3 <span class="sc">==</span> <span class="st">"Neither Accurate nor Inaccurate"</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>      q3 <span class="sc">==</span> <span class="st">"Moderately Accurate"</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>      q3 <span class="sc">==</span> <span class="st">"Very Accurate"</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 76 × 51
     ppt q1    q2       q3 q4    q5    q6    q7    q8    q9    q10   q11   q12  
   &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
 1     1 Mode… Very…     4 Mode… Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode…
 2     2 Neit… Mode…     4 Neit… Mode… Mode… Mode… Mode… Neit… Neit… Mode… Very…
 3     3 Very… Very…     3 Mode… Mode… Mode… Mode… Neit… Mode… Very… Mode… Very…
 4     4 Very… Mode…     4 Mode… Very… Mode… Mode… Mode… Mode… Mode… Mode… Very…
 5     5 Very… Very…     3 Mode… Mode… Very… Neit… Neit… Mode… Mode… Neit… Mode…
 6     6 Mode… Very…     2 Very… Very… Neit… Mode… Very… Neit… Mode… Mode… Very…
 7     7 Mode… Very…     4 Very… Mode… Mode… Mode… Mode… Neit… Mode… Neit… Very…
 8     8 Mode… Neit…     5 Very… Neit… Neit… Mode… Very… Very… Neit… Mode… Very…
 9     9 Neit… Mode…     5 Very… Very… Neit… Very… Neit… Neit… Very… Mode… Very…
10    10 Neit… Very…     4 Mode… Mode… Neit… Mode… Mode… Mode… Mode… Neit… Very…
# ℹ 66 more rows
# ℹ 38 more variables: q13 &lt;chr&gt;, q14 &lt;chr&gt;, q15 &lt;chr&gt;, q16 &lt;chr&gt;, q17 &lt;chr&gt;,
#   q18 &lt;chr&gt;, q19 &lt;chr&gt;, q20 &lt;chr&gt;, q21 &lt;chr&gt;, q22 &lt;chr&gt;, q23 &lt;chr&gt;,
#   q24 &lt;chr&gt;, q25 &lt;chr&gt;, q26 &lt;chr&gt;, q27 &lt;chr&gt;, q28 &lt;chr&gt;, q29 &lt;chr&gt;,
#   q30 &lt;chr&gt;, q31 &lt;chr&gt;, q32 &lt;chr&gt;, q33 &lt;chr&gt;, q34 &lt;chr&gt;, q35 &lt;chr&gt;,
#   q36 &lt;chr&gt;, q37 &lt;chr&gt;, q38 &lt;chr&gt;, q39 &lt;chr&gt;, q40 &lt;chr&gt;, q41 &lt;chr&gt;,
#   q42 &lt;chr&gt;, q43 &lt;chr&gt;, q44 &lt;chr&gt;, q45 &lt;chr&gt;, q46 &lt;chr&gt;, q47 &lt;chr&gt;, …</code></pre>
</div>
</div>
</section>
</div>
<section id="reverse-coding" class="level2">
<h2 class="anchored" data-anchor-id="reverse-coding">reverse coding</h2>
<p>tidyverse base</p>
</section>
</section>
<section id="applying-the-same-operation-across-variables" class="level1">
<h1>applying the same operation across variables</h1>
<p>tidyverse mutate(across()) base apply(df,2,fun)</p>
<p>check!</p>
</section>
<section id="rowwise-metrics" class="level1">
<h1>rowwise metrics</h1>
<p>counting NAs</p>
</section>
<section id="row-scoring" class="level1">
<h1>row scoring</h1>
<p>rowsums rowmeans NAs</p>
<p>link reliability</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Technically this is pronounced “LICK-URT” and not “LIE-KURT”. It’s named after <a href="https://en.wikipedia.org/wiki/Rensis_Likert" target="_blank">Dr Rensis Likert</a>, and that’s how he pronounced his name!<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">© Copyright 2019-2024 <a href="https://www.ed.ac.uk/">The University of Edinburgh</a>. Site licensed under the <a href="https://www.gnu.org/licenses/agpl-3.0.en.html">GNU AGPLv3</a> license.</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>